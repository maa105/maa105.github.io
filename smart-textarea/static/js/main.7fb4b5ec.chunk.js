(this["webpackJsonpsmart-textarea-maa"]=this["webpackJsonpsmart-textarea-maa"]||[]).push([[0],{11:function(e,t,r){e.exports={inEditMarker:"App_inEditMarker__2hzif"}},18:function(e,t,r){},25:function(e,t,r){},26:function(e,t,r){"use strict";r.r(t);var n=r(1),a=r.n(n),i=r(10),o=r.n(i),c=r(4),u=r(11),s=r.n(u),d=r(0),l=r(3),f=(r(18),r(12)),p=r.n(f),b=r(6),m=r(5),v=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=function(e){for(var r=0;r<t.length;r++){var n=t[r];"function"===typeof n?n(e):"string"===typeof n||n&&(n.current=e)}};return n},h=function(e,t,r){var a=Object(n.useRef)({}),i=Object(n.useRef)({}),o=function(){var t,r,n=Object(d.a)(Object(d.a)({},a.current.children),a.current.current);i.current=n,r=n,"function"===typeof(t=e)?t(r):t&&(t.current=r)};return Object(n.useImperativeHandle)((function(e){a.current.current=e,o()}),t,r),[function(e){a.current.children=e,o()},i,a]},j=function(e){var t=e.markers,r=e.midSelectedMarkerIndex,n=e.endSelectedMarkerIndex,a=e.startSelectedMarkerIndex,i=t[r],o=t[n],c=t[a];return i&&i.isLocked?{block:!0,selectionStart:i.start,selectionEnd:i.end}:o&&o.isLocked?{block:!0,selectionStart:o.start,selectionEnd:o.end}:c&&c.isLocked?{block:!0,selectionStart:c.start,selectionEnd:c.end}:{block:!1}},k=r(2),O=["onSelectionChange","value","markers","onInEditMarkerChange"],g=function(e){var t=function(e){return e.midSelectedMarkerIndex>=0?e.midSelectedMarkerIndex:e.endSelectedMarkerIndex>=0?e.endSelectedMarkerIndex:e.markerWithEndTouchedIndex>=0?e.markerWithEndTouchedIndex:-1}(e);return e.inEditMarkerIndex=t,e},x=function(e){for(var t,r,n=e.markers,a=e.selectionStart,i=e.selectionEnd,o={startIndex:-1,endIndex:-1},c=-1,u=-1,s=-1,d=-1,l=-1,f=0,p=function(){var e,a;return g({markers:n,selectedMarkersRange:o,startSelectedMarkerIndex:c,endSelectedMarkerIndex:u,midSelectedMarkerIndex:s,markerWithStartTouchedIndex:d,markerWithEndTouchedIndex:l,prevMarkerIndex:t,nextMarkerIndex:(null!==(e=r)&&void 0!==e?e:-1)>=n.length?-1:null!==(a=r)&&void 0!==a?a:-1})};f<n.length&&n[f].end<a;f++);t=f-1;var b=n[f];if(!b)return p();if(b.end===a&&(l=t=f,f++,!(b=n[f])))return p();if(b.start>=i)return r=f,b.start===i&&(d=f),p();var m=a<=b.start&&b.start<i,v=a<b.end&&b.end<=i,h=m&&v;if(!m&&!v)return s=f,r=f+1,p();if(!h){if(m)return c=f,r=f+1,p();if(u=f,f++,!(b=n[f]))return p();if(m=a<=b.start&&b.start<i,v=a<b.end&&b.end<=i,!(h=m&&v))return m?(r=f+1,c=f):(r=f,b.start===i&&(d=f)),p()}for(o.startIndex=f,f++;f<n.length;f++)if(m=a<=(b=n[f]).start&&b.start<i,v=a<b.end&&b.end<=i,!(h=m&&v)){m?(r=f+1,c=f):(r=f,b.start===i&&(d=f));break}return o.endIndex=f,p()},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"textarea";return Object(n.forwardRef)((function(t,r){var a=t.onSelectionChange,i=t.value,o=t.markers,c=t.onInEditMarkerChange,u=Object(l.a)(t,O),s=Object(n.useRef)({}),f=Object(n.useRef)();return Object(k.jsx)(e,Object(d.a)(Object(d.a)({ref:v(r,f)},u),{},{value:i,markers:o,onSelectionChange:function(e){var t=e.target,r=t.selectionStart,n=t.selectionEnd,u=r===n,l=r,f=n,p=s.current.selection,b=p&&(null===p||void 0===p?void 0:p.selectionStart)!==r?r-p.selectionStart:0,m=p&&(null===p||void 0===p?void 0:p.selectionEnd)!==n?n-p.selectionEnd:0,v=x({markers:o,selectionStart:r,selectionEnd:n}),h=v.midSelectedMarkerIndex,j=v.markerWithEndTouchedIndex,k=v.endSelectedMarkerIndex,O=v.selectedMarkersRange,y=v.startSelectedMarkerIndex,I=v.markerWithStartTouchedIndex,C=v.prevMarkerIndex,E=v.nextMarkerIndex;if(h>=0){var T=o[h];T.isLocked&&(u?(b<0?(l=f=T.start,I=h):(l=f=T.end,j=h),h=-1):(l=T.start,f=T.end,O.startIndex=h,O.endIndex=h,h=-1))}else{if(k>=0){var L=o[k];L.isLocked&&(b<0?(l=L.start,O.startIndex=k,-1===O.endIndex&&(O.endIndex=k),k=-1):(l=L.end,j=k,k=-1))}if(y>=0){var M=o[y];M.isLocked&&(m>0?(f=M.end,O.endIndex=y,-1===O.startIndex&&(O.startIndex=y),y=-1):(f=M.start,I=y,y=-1))}}n!==f&&(t.selectionEnd=f),r!==l&&(t.selectionStart=l);var S=g({markers:o,selectionStart:l,selectionEnd:f,prevMarkerIndex:C,midSelectedMarkerIndex:h,markerWithEndTouchedIndex:j,endSelectedMarkerIndex:k,selectedMarkersRange:O,startSelectedMarkerIndex:y,markerWithStartTouchedIndex:I,nextMarkerIndex:E});s.current.selection=S,c&&c({target:t,value:i,markers:o,inEditMarkerIndex:S.inEditMarkerIndex,oldInEditMarkerIndex:null===p||void 0===p?void 0:p.inEditMarkerIndex}),a&&a(Object(d.a)(Object(d.a)({},e),S))}}))}))},I=["initValue","initMarkers","onInput","onChange","onMarkersChange","disabled","imperativeRef"],C=["textValue","cursor","appendText"],E=!0,T={" ":E,"\t":E,"\r":E,"\n":E,"\v":E,"\0":E},L=function(e){var t=e.uuid,r=e.version,n=e.anchor,a=e.type,i=e.start,o=e.end,c=e.markerData,u=void 0===c?{}:c,s=e.data,d=e.isLocked,l=void 0!==d&&d;return{uuid:null!==t&&void 0!==t?t:"".concat(Math.round(999999*Math.random()),"-").concat(Date.now()),version:r,anchor:n,type:a,start:i,end:o,markerData:u,data:s,isLocked:l}},M=function(e,t){for(var r=0,n=t.anchors,a=[];r<e.length;){for(var i=void 0;r<e.length;){if((0===r||T[e[r-1]])&&n[e[r]]){i=n[e[r]];break}r++}if(!i)break;var o=r;r=o+1;for(var c={},u=i.parts,s=0;s<u.length;s++){var d=u[s],l=d.key,f=d.startChar,p=d.endChars;if(f){if(e[r]!==f)break;r++}for(var b=r;r<e.length&&!p[e[r]];)r++;if(c[l]=e.substring(b,r),r>=e.length||p[e[r]]===E)break;1===p[e[r]]&&r++}a.push({anchor:i.anchorChar,type:i.type,version:t.version,start:o,end:r,markerData:c})}return a},S=function(e,t){return function(r,n,a){var i=e(r,t).map((function(e,t){return L(Object(d.a)(Object(d.a)(Object(d.a)({isLocked:!1},0===t&&0===e.start?a:{}),e),{},{uuid:0===t&&0===e.start&&a?a.uuid:null,start:e.start+n,end:e.end+n,value:r}))}));return[r,i]}},w=function(e){var t=e.markers,r=e.prevValue,n=e.selectionStart,a=e.selectionEnd,i=e.insertedText,o=e.prevMarkerIndex,u=e.midSelectedMarkerIndex,s=e.markerWithEndTouchedIndex,l=e.endSelectedMarkerIndex,f=e.nextMarkerIndex,p=e.markerParser,b=r.substring(0,n)+i+r.substring(a),v=b.length-r.length,h=-1,j=[];if(u>=0){var k;h=u;var O,g,x=t[u];if(x.isLocked)n=a=x.end,(O=j).push.apply(O,Object(m.a)(t.slice(0,u+1))),v=i.length,b=r.substring(0,n)+i+r.substring(a);else(g=j).push.apply(g,Object(m.a)(t.slice(0,u))),j.push(Object(d.a)(Object(d.a)({},x),{},{end:a}));(k=j).push.apply(k,Object(m.a)(t.slice(u+1).map((function(e){return Object(d.a)(Object(d.a)({},e),{},{start:e.start+v,end:e.end+v})}))))}else{var y;if(s>=0)h=s,(y=j).push.apply(y,Object(m.a)(t.slice(0,s+1)));else if(l>=0){h=l;var I,C,E=t[l];if(E.isLocked)n=a=E.end,(I=j).push.apply(I,Object(m.a)(t.slice(0,l+1))),v=i.length,b=r.substring(0,n)+i+r.substring(a);else(C=j).push.apply(C,Object(m.a)(t.slice(0,l))),j.push(Object(d.a)(Object(d.a)({},E),{},{end:n}))}else if(o>=0){var T;(T=j).push.apply(T,Object(m.a)(t.slice(0,o+1)))}if(f>=0){var L,M=t.slice(f).map((function(e){return Object(d.a)(Object(d.a)({},e),{},{start:e.start+v,end:e.end+v})}));f=j.length,(L=j).push.apply(L,Object(m.a)(M)),f=f>=j.length?-1:f}}var S=j[h];if(S&&!S.isLocked){var w=S.start,R=f>=0?j[f].start:b.length,D=b.substring(w,R),N=p(D,w,S),H=Object(c.a)(N,2),V=H[0],P=H[1];if(V!==D){var F=V-D;if(F&&f>=0)for(var A=f;A<j.length;A++){var W=j[A];j[A]=Object(d.a)(Object(d.a)({},W),{},{start:W.start+F,end:W.end+F})}b=b.substring(0,w)+V+b.substring(R)}j=[].concat(Object(m.a)(j.slice(0,h)),Object(m.a)(P),Object(m.a)(j.slice(h+1)))}else{var z=o>=0?j[o].end:0,K=f>=0?j[f].start:b.length,B=b.substring(z,K),U=p(B,z),J=Object(c.a)(U,2),Z=J[0],q=J[1];if(Z!==B){var G=Z-B;if(G&&f>=0)for(var X=f;X<j.length;X++){var Y=j[X];j[X]=Object(d.a)(Object(d.a)({},Y),{},{start:Y.start+G,end:Y.end+G})}b=b.substring(0,z)+Z+b.substring(K)}var _=[];o>=0&&_.push.apply(_,Object(m.a)(j.slice(0,o+1))),_.push.apply(_,Object(m.a)(q)),f>=0&&_.push.apply(_,Object(m.a)(j.slice(f))),j=_}return{newValue:b,newMarkers:j,selectionStart:n,selectionEnd:a}},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.markerParser,r=void 0===t?M:t,a=e.markerParserOptions;if(r===M){var i={};a.anchors.forEach((function(e){var t=e.parts.map((function(e,t,r){var n,a=e.startChar,i=e.endChar;return{key:e.key,startChar:a,endChars:Object(d.a)(Object(d.a)({},i?Object(b.a)({},i,1):T),(null===(n=r[t+1])||void 0===n?void 0:n.startChar)?Object(b.a)({},r[t+1].startChar,2):null)}}));i[e.anchorChar]=Object(d.a)(Object(d.a)({},e),{},{parts:t})})),a=Object(d.a)(Object(d.a)({},a),{},{anchors:i})}return r=S(r,a),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"textarea";return Object(n.forwardRef)((function(t,a){var i,o=t.initValue,u=t.initMarkers,s=t.onInput,f=t.onChange,p=t.onMarkersChange,b=t.disabled,O=t.imperativeRef,g=Object(l.a)(t,I),y=Object(n.useRef)();y.current=y.current||{value:null!==o&&void 0!==o?o:"",markers:null!==(i=null===u||void 0===u?void 0:u.map((function(e){return L(Object(d.a)({isLocked:!0},e))})))&&void 0!==i?i:[]},y.current.onMarkersChange=p,y.current.disabled=b;var E=Object(n.useRef)();(g.value||g.markers)&&(console.warn('Do not use props "value" and "markers". Use "initValue" and "initMarkers" instead'),delete g.markers,delete g.value);var T=Object(n.useState)(y.current.value),M=Object(c.a)(T,2),S=M[0],R=M[1],D=Object(n.useState)(y.current.markers),N=Object(c.a)(D,2),H=N[0],V=N[1],P=function(e){y.current.value=e,R(e)},F=function(e){y.current.markers=e,V(e)},A=h(O,(function(){return{updateMarker:function(e,t){return function(e,t){var r=y.current.markers,n=y.current.value,a=r.findIndex((function(t){return t.uuid===e.uuid}));if(a<0)return!1;e=r[a];var i=function(t){if(!t&&null!==t)return e;var i,o,c=null;if(t){var u,s,b=t.textValue,v=t.cursor,h=t.appendText,j=void 0===h?"":h,k=Object(l.a)(t,C),O=null!=b,g=O?b.length+j.length-(e.end-e.start):0;if(o=Object(m.a)(r.slice(0,a)),c=Object(d.a)(Object(d.a)({},e),{},{end:O?e.start+b.length:e.end},k),o.push(c),g?(u=o).push.apply(u,Object(m.a)(r.slice(a+1).map((function(e){return Object(d.a)(Object(d.a)({},e),{},{start:e.start+g,end:e.end+g})})))):(s=o).push.apply(s,Object(m.a)(r.slice(a+1))),i=n,O&&(i=[n.substring(0,e.start),b,j,n.substring(e.end)].join(""),P(i)),F(o),v){var x=E.current;E.current.value=i;var y=o[a];"start"===v?x.selectionStart=x.selectionEnd=y.start:"end"===v&&(x.selectionStart=x.selectionEnd=y.end+j.length)}}else{var I=e,T=I.start,L=I.end-T;i=n.substring(0,e.start)+n.substring(e.end),o=[].concat(Object(m.a)(r.slice(0,a)),Object(m.a)(r.slice(a+1).map((function(e){return Object(d.a)(Object(d.a)({},e),{},{start:e.start-L,end:e.end-L})})))),P(i),F(o)}return p&&p({target:E.current,init:!1,value:i,oldValue:n,markers:o,oldMarkers:r}),f&&f({target:E.current,value:i,markers:o}),c};return i("function"===typeof t?t(e):t)}(e,(function(e){if("function"===typeof t&&(t=t(e)),y.current.disabled){if(null===t)return!1;if(t)return void 0===e.data&&{data:t.data}}if(t){var r,n,a;if(e.isLocked)n=!0,!1===t.isLocked&&console.warn("cannot unloack a locked marker. Will keep it locked!");else n=null!==(a=t.isLocked)&&void 0!==a&&a;return{isLocked:n,textValue:t.textValue,data:void 0===t.data?e.data:t.data,markerData:null!==(r=t.markerData)&&void 0!==r?r:e.markerData,cursor:t.cursor}}return t}))}}}),[]),W=Object(c.a)(A,1)[0];return Object(n.useEffect)((function(){var e=E.current,t=y.current.onMarkersChange;t&&t({target:e,init:!0,value:y.current.value,oldValue:"",markers:y.current.markers,oldMarkers:[]})}),[]),Object(k.jsx)(e,Object(d.a)(Object(d.a)({},g),{},{ref:v(a,E),imperativeRef:W,disabled:b,value:S,markers:H,onInput:function(e){var t=e.target,n=t.value,a=S;if(a===n)return!0;var i,o=t.selectionEnd,c=a.length-(n.length-o),u=Math.min(c,o);for(i=0;i<u&&a[i]===n[i];i++);var l=x({markers:H,selectionStart:i,selectionEnd:c}),f=j(l);if(y.current.blockTimer&&(clearTimeout(y.current.blockTimer),y.current.blockTimer=null),f.block)return t.selectionStart=f.selectionStart,t.selectionEnd=f.selectionEnd,y.current.blockTimer=setTimeout((function(){y.current.blockTimer=null;try{t.selectionStart=f.selectionStart,t.selectionEnd=f.selectionEnd}catch(e){}})),e.preventDefault(),!1;var b=n.substring(i,o),m=l,v=m.prevMarkerIndex,h=m.midSelectedMarkerIndex,k=m.markerWithEndTouchedIndex,O=m.endSelectedMarkerIndex,g=m.nextMarkerIndex,I=w({markers:H,prevValue:a,selectionStart:i,selectionEnd:c,insertedText:b,prevMarkerIndex:v,midSelectedMarkerIndex:h,markerWithEndTouchedIndex:k,endSelectedMarkerIndex:O,nextMarkerIndex:g,markerParser:r}),C=I.newValue,E=I.newMarkers;C!==n&&console.error('OOPS! input tracking is broken. Expected "'.concat(n,'" got "').concat(C,'"')),P(C),F(E);var T=o;return t.selectionStart=T,l=Object(d.a)({selectionStart:T,selectionEnd:T},x({markers:E,selectionStart:T,selectionEnd:T})),p&&p({target:t,init:!1,value:C,oldValue:S,markers:E,oldMarkers:H}),s&&s({target:t,value:C,markers:E}),!0},onChange:function(e){f&&f({target:e.target,value:y.current.value,markers:y.current.markers})}}))}))}},D=r(13),N=r.n(D),H=["labelLine"],V=["anchorProps","TipComponent"],P=["backgroundColor","InnerComponent","TipComponent","visibleTipsData","updateTipVisibility","updateTipFocusFunction","onResize","onScroll","onMarkersChange","onInEditMarkerChange","imperativeRef","id"],F=["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing","tabSize","MozTabSize"];function A(e,t,r){var n=r&&r.debug||!1;if(n){var a=document.querySelector("#input-textarea-caret-position-mirror-div");a&&a.parentNode.removeChild(a)}var i=document.createElement("div");i.id="input-textarea-caret-position-mirror-div",document.body.appendChild(i);var o=i.style,c=window.getComputedStyle?window.getComputedStyle(e):e.currentStyle,u="INPUT"===e.nodeName;o.whiteSpace="pre-wrap",u||(o.wordWrap="break-word"),o.position="absolute",n||(o.visibility="hidden"),F.forEach((function(e){if(u&&"lineHeight"===e)if("border-box"===c.boxSizing){var t=parseInt(c.height,10),r=parseInt(c.paddingTop,10)+parseInt(c.paddingBottom,10)+parseInt(c.borderTopWidth,10)+parseInt(c.borderBottomWidth,10),n=r+parseInt(c.lineHeight,10);o.lineHeight=t>n?"".concat(t-r,"px"):t===n?c.lineHeight:0}else o.lineHeight=c.height;else o[e]=c[e]})),!u&&e.clientHeight<e.scrollHeight?o.overflowY="scroll":o.overflowY="hidden",!u&&e.clientWidth<e.scrollWidth?o.overflowX="scroll":o.overflowX="hidden";for(var s=e.value,d=[s.substring(0,t[0])],l=s.length,f=0;f<t.length;f++){if(t[f]>=l){d.push(null);break}u?(d.push(s[t[f]].replace(/\s/g,"\xa0")),d.push(s.substring(t[f]+1,t[f+1]).replace(/\s/g,"\xa0"))):(d.push(s[t[f]]),d.push(s.substring(t[f]+1,t[f+1])))}for(var p=[],b=0;b<d.length;b++){var m=document.createElement("span");null===d[b]?m.textContent=" ":m.textContent=d[b],b%2&&(p.push(m),n&&(m.style.backgroundColor="#aaa")),i.appendChild(m)}for(var v=[],h=parseInt(c.borderTopWidth,10)+parseInt(c.marginTop,10)-e.scrollTop,j=parseInt(c.borderLeftWidth,10)+parseInt(c.marginLeft,10)-e.scrollLeft,k=parseInt(c.lineHeight,10),O=0;O<p.length;O++)v.push({top:p[O].offsetTop+h,left:p[O].offsetLeft+j,height:k});return n?(o.top="0",o.right="0"):document.body.removeChild(i),v}var W=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.debug;if(!e)return[];for(var a=[],i=0;i<t.length;i++)a.push(t[i].start,t[i].end);for(var o=[],c=0;c<a.length;c++)a[c]!==a[c-1]&&o.push(a[c]);for(var u=A(e,o,{debug:n}),s=[],d=0,l=0;d<a.length;d++)s.push(u[l]),a[d]!==a[d+1]&&l++;for(var f=[],p=e.clientWidth,b=0;b<s.length;b+=2){var m=s[b],v=m.left,h=m.top,j=m.height,k=s[b+1],O=k.left,g=k.top;if(h!==g){for(var x=[{x:v,y:h,w:p-v,h:j}],y=Math.round((g-h)/j)-1,I=0;I<y;I++)x.push({x:0,y:h+(I+1)*j,w:p,h:j});x.push({x:0,y:h+(y+1)*j,w:O,h:j}),f.push(x)}else f.push([{x:v,y:h,w:O-v,h:j}])}return f},z=function(e){var t=e.x,r=e.y,n=e.w,a=e.h;return{left:"".concat(t,"px"),top:"".concat(r,"px"),height:"".concat(a,"px"),width:"".concat(n,"px")}},K=Object(n.forwardRef)((function(e,t){var r=e.labelLine,n=Object(l.a)(e,H);return Object(k.jsx)("div",Object(d.a)(Object(d.a)({ref:t},n),{},{style:z(r)}))})),B=Object(n.forwardRef)((function(e,t){var r=e.anchorProps,n=e.TipComponent,a=Object(l.a)(e,V);return Object(k.jsx)("div",Object(d.a)(Object(d.a)({ref:t},r),{},{children:Object(k.jsx)(n,Object(d.a)({},a))}))})),U=function(e){var t=e.marker,r=e.labelLines,a=e.getClassName,i=e.tipClassName,o=e.InnerComponent,u=e.TipComponent,s=e.visibleTipData,d=e.updateTipVisibility,l=e.updateTipFocusFunction,f=e.markersHandlers,p=e.textAreaId,b=e.tipsZIndex,m=Object(n.useState)(-1),v=Object(c.a)(m,2),h=v[0],j=v[1],O=null==s?h:s.labelLineIndex;!0===O&&(O=r.length-1);var g=Object(n.useRef)({}),x=function(e){clearTimeout(g.current.timer),function(e,r){null==s?j(r):d({marker:t,visibile:!0,labelLineIndex:r,type:e})}("mouseOver",e)},y=function(e){null==!s?j(-1):d({marker:t,visibile:!1,type:e})},I=function(){g.current.timer=setTimeout((function(){y("mouseOver")}),250)};Object(n.useEffect)((function(){return function(){return clearTimeout(g.current.timer)}}),[]);var C=function(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.start,a=r.end,i=null!==(e=r.delta)&&void 0!==e?e:0;n?f.focus(t.start-i):a?f.focus(t.end+i):f.focus()},E=function(){return C({end:!0})},T=t.uuid,L=Object(n.useCallback)((function(e){l({marker:T,focus:null===e||void 0===e?void 0:e.focus})}),[l,T]),M=O>=0,S=r.length-1;return r.map((function(e,n){var c=0===n,s=n===S,d="".concat(t.uuid,"[").concat(n,"].button"),l="".concat(t.uuid,"[").concat(n,"].list"),m=u&&O===n,v=function(i){return Object(k.jsx)(K,{ref:i,id:d,role:"button","aria-haspopup":"true","aria-controls":l,"aria-expanded":m,labelLine:e,onMouseEnter:function(){return x(n)},onMouseLeave:I,onPointerDown:E,onPointerUp:E,onClick:E,"data-tip-anchor-for-textarea":p,"data-tip-anchor-for-marker":t.uuid,className:a({isFirstLine:c,isLastLine:s,isTipVisible:M}),children:o?Object(k.jsx)(o,{marker:t,markersHandlers:f,labelLine:e,labelLineIndex:n,labelLines:r}):null},n)};return m?Object(k.jsx)(N.a,{attachment:"top left",targetAttachment:"bottom left",style:{zIndex:b},constraints:[{to:"scrollParent",attachment:"together"},{to:"window",attachment:"together"}],renderTarget:v,renderElement:function(e){return Object(k.jsx)(B,{ref:e,focusImperativeRef:L,TipComponent:u,menuListId:l,menuButtonId:d,marker:t,markersHandlers:f,focusParent:C,onHide:function(e){y(),!1!==e&&C(e)},anchorProps:{className:i,onMouseEnter:function(){return x(n)},onMouseLeave:I,"data-tip-for-textarea":p,"data-tip-for-marker":t.uuid}})}},"visible-tip"):v()}))},J=function(e){var t=e.marker;return Object(k.jsx)("pre",{children:JSON.stringify(t,null,3)})},Z=function(e){var t=e.markers,r=e.inEditMarker,n=e.labels,a=e.getClassName,i=e.getTipClassName,o=e.InnerComponent,c=e.TipComponent,u=void 0===c?J:c,s=e.visibleTipsData,l=e.updateTipVisibility,f=e.updateTipFocusFunction,p=e.markersHandlers,b=e.textAreaId,m=e.tipsZIndex;return t.map((function(e,t){var c=n[t];return c?Object(k.jsx)(U,{marker:e,labelLines:c,getClassName:function(t){return a(Object(d.a)(Object(d.a)({},t),{},{isInEdit:e.uuid===(null===r||void 0===r?void 0:r.uuid),marker:e}))},tipClassName:i({marker:e}),InnerComponent:o,TipComponent:u,visibleTipData:s?null!=s[e.uuid]&&s[e.uuid]:null,updateTipVisibility:l,updateTipFocusFunction:f,markersHandlers:p,textAreaId:b,tipsZIndex:m},e.uuid):null}))},q=function(e){var t=e.labelLines,r=e.getClassName,n=t.length-1;return t.map((function(e,t){var a=0===t,i=t===n;return Object(k.jsx)(K,{labelLine:e,className:r({isFirstLine:a,isLastLine:i})},t)}))},G=function(e){var t=e.markers,r=e.labels,n=e.inEditMarker,a=e.visibleTipsData,i=e.getClassName;return t.map((function(e,t){var o=r[t];return o?Object(k.jsx)(q,{labelLines:o,getClassName:function(t){return i(Object(d.a)(Object(d.a)({},t),{},{isInEdit:e.uuid===(null===n||void 0===n?void 0:n.uuid),isTipVisible:Boolean(a[e.uuid]),marker:e}))}},e.uuid):null}))},X={back:function(e){var t=e.isFirstLine,r=e.isLastLine,n=e.isInEdit,a=e.isTipVisible,i=e.marker;return"textarea-back-label textarea-back-".concat(i.type,"-label").concat(t?" textarea-back-label-first-line":"").concat(r?" textarea-back-label-last-line":"").concat(n?" textarea-back-label-inedit":"").concat(a?" textarea-back-label-tip-shown":"")},front:function(e){var t=e.isFirstLine,r=e.isLastLine,n=e.isInEdit,a=e.isTipVisible,i=e.marker;return"textarea-front-label textarea-front-".concat(i.type,"-label").concat(t?" textarea-front-label-first-line":"").concat(r?" textarea-front-label-last-line":"").concat(n?" textarea-front-label-inedit":"").concat(a?" textarea-front-label-tip-shown":"")},tip:function(e){var t=e.marker;return"textarea-tip-container textarea-tip-".concat(t.type,"-container")}},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.defaultBackgroundColor,r=void 0===t?"white":t,a=e.tipsZIndex,i=void 0===a?99999999:a,o=e.classNameGetters,u=void 0===o?X:o;return u=Object(d.a)(Object(d.a)({},X),u),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"textarea";return Object(n.forwardRef)((function(t,a){var o,s=t.backgroundColor,f=void 0===s?r:s,p=t.InnerComponent,b=t.TipComponent,m=t.visibleTipsData,h=t.updateTipVisibility,j=t.updateTipFocusFunction,O=t.onResize,g=t.onScroll,x=t.onMarkersChange,y=t.onInEditMarkerChange,I=t.imperativeRef,C=t.id,E=Object(l.a)(t,P),T=Object(n.useRef)({markers:[]}),L=Object(n.useRef)(),M=Object(n.useRef)(),S=Object(n.useState)([]),w=Object(c.a)(S,2),R=w[0],D=w[1],N=Object(n.useState)(T.current.markers),H=Object(c.a)(N,2),V=H[0],F=H[1],A=Object(n.useState)(null),z=Object(c.a)(A,2),K=z[0],B=z[1];return Object(n.useEffect)((function(){var e=M.current;T.current.markers=V,D(W(e,V))}),[V]),Object(k.jsxs)("div",{id:C,className:"textarea-container",style:{backgroundColor:f,width:null===(o=E.style)||void 0===o?void 0:o.width},children:[Object(k.jsx)("div",{className:"textarea-back",children:Object(k.jsx)(G,{markers:T.current.markers,inEditMarker:K,labels:R,visibleTipsData:m,getClassName:u.back})}),Object(k.jsx)(e,Object(d.a)(Object(d.a)({ref:v(a,M)},E),{},{id:C,imperativeRef:v(L,I),onScroll:function(e){var t=M.current;D(W(t,V)),g&&g(e)},onResize:function(e){var t=M.current;D(W(t,V)),O&&O(e)},onMarkersChange:function(e){var t=e.markers;F(t),x&&x(e)},onInEditMarkerChange:function(e){var t=e.markers[e.inEditMarkerIndex];B(t),y&&y(e)}})),Object(k.jsx)("div",{className:"textarea-front",children:Object(k.jsx)(Z,{markers:T.current.markers,inEditMarker:K,labels:R,getClassName:u.front,getTipClassName:u.tip,InnerComponent:p,TipComponent:b,visibleTipsData:m,updateTipVisibility:h,updateTipFocusFunction:j,markersHandlers:L.current,textAreaId:C,tipsZIndex:i})})]})}))}},_=["onResize"],Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"textarea";return Object(n.forwardRef)((function(t,r){var a,i=t.onResize,o=Object(l.a)(t,_),c=Object(n.useRef)({});c.current.onResize=i;var u=Object(n.useRef)();return Object(n.useEffect)((function(){var e=u.current.contentWindow;return e.onresize=function(e){c.current.onResize&&c.current.onResize(e)},function(){e.onresize=null}}),[]),Object(k.jsxs)("div",{className:"textarea-with-resize-container",style:{width:null===(a=o.style)||void 0===a?void 0:a.width},children:[Object(k.jsx)("iframe",{ref:u,title:"resize-frame"}),Object(k.jsx)(e,Object(d.a)({ref:r},o))]})}))},$=["onSelectionChange"],ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"textarea";return Object(n.forwardRef)((function(t,r){var a=t.onSelectionChange,i=Object(l.a)(t,$),o=Object(n.useRef)({});o.current.onSelectionChange=a;var c=Object(n.useRef)();return Object(n.useEffect)((function(){var e=c.current,t=function(e){var t=c.current;t===document.activeElement&&o.current.onSelectionChange&&o.current.onSelectionChange({target:t})};document.addEventListener("selectionchange",t);var r=function(e){var t=c.current;"Delete"!==e.key&&"Backspace"!==e.key||o.current.onSelectionChange({target:t})};return e.addEventListener("keyup",r),function(){document.removeEventListener("selectionchange",t),e.removeEventListener("keyup",r)}}),[]),Object(k.jsx)(e,Object(d.a)({ref:v(r,c)},i))}))},te=["onHide"],re=["imperativeRef","onInEditMarkerChange"],ne=!1,ae=!0,ie="toggle",oe=function(e){return function(t){var r=t.onHide,a=Object(l.a)(t,te),i=Object(n.useRef)({});return i.current.onHide=r,Object(n.useEffect)((function(){var e=function(e){"Escape"===e.key&&i.current.onHide()};return document.addEventListener("keyup",e),function(){return document.removeEventListener("keyup",e)}}),[]),Object(k.jsx)(e,Object(d.a)({onHide:r},a))}},ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return ae};return function(t){var r=t.markerUuid,n=t.visiblityStack,a=t.requestedHideType,i=e({markerUuid:r,visiblityStack:n});return Array.isArray(i)?i:i===ne?n:1!==i&&a?n.filter((function(e){return e.type!==a})):[]}},ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.TipComponent,r=e.hideOnEscape,a=void 0===r||r;return a&&(t=oe(t)),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"textarea";return Object(n.forwardRef)((function(r,a){var i=r.imperativeRef,o=r.onInEditMarkerChange,u=Object(l.a)(r,re),s=Object(n.useRef)({}),f=Object(n.useState)({data:{},dataStack:{}}),p=Object(c.a)(f,2),v=p[0].data,j=p[1],O=Object(n.useCallback)((function(e){var t=e.marker,r=e.focus,n=(null===t||void 0===t?void 0:t.uuid)||t;j((function(e){var t=e.data,a=e.dataStack;return t[n]?{data:Object(d.a)(Object(d.a)({},t),{},Object(b.a)({},n,Object(d.a)(Object(d.a)({},t[n]),{},{focus:r}))),dataStack:a}:e}))}),[]),g=Object(n.useCallback)((function(e){var t=e.marker,r=e.type,n=e.visibile,a=e.labelLineIndex,i=e.hideAction;i=ce(i);var o=(null===t||void 0===t?void 0:t.uuid)||t;j(n||o?function(e){var t,c,u=e.data,s=e.dataStack;if(!(n=n===ie?!(null===(t=s[o])||void 0===t?void 0:t.find((function(e){return e.type===r}))):Boolean(n))){var l=s[o];if(!l)return e;var f=i({markerUuid:o,visiblityStack:l,requestedHideType:r});if(f.length){var p=f[f.length-1];return{data:Object(d.a)(Object(d.a)({},u),{},Object(b.a)({},o,{type:p.type,labelLineIndex:p.labelLineIndex,focus:u[o].focus})),dataStack:Object(d.a)(Object(d.a)({},s),{},Object(b.a)({},o,f))}}var v=Object(d.a)({},u);delete v[o];var h=Object(d.a)({},s);return delete h[o],{data:v,dataStack:h}}return r=r||"default-inner",{data:Object(d.a)(Object(d.a)({},u),{},Object(b.a)({},o,{type:r,labelLineIndex:null===a||void 0===a||a,focus:null===(c=u[o])||void 0===c?void 0:c.focus})),dataStack:Object(d.a)(Object(d.a)({},s),{},Object(b.a)({},o,[].concat(Object(m.a)((s[o]||[]).filter((function(e){return e.type!==r}))),[{type:r,labelLineIndex:null===a||void 0===a||a}])))}}:function(e){var t=e.data,n=e.dataStack,a=Object(d.a)({},t),o=Object(d.a)({},n);for(var c in o){var u=i({markerUuid:c,visiblityStack:n[c],requestedHideType:r});if(u.length){o[c]=u;var s=a[c].focus,l=o[c][o[c].length-1];a[c]={type:l.type,labelLineIndex:l.labelLineIndex,focus:s}}else delete o[c],delete a[c]}return{data:a,dataStack:o}})}),[]),x=h(i,(function(){return{updateTipVisibility:g}}),[g]),y=Object(c.a)(x,1)[0];return Object(k.jsx)(e,Object(d.a)(Object(d.a)({ref:a},u),{},{imperativeRef:y,TipComponent:t,visibleTipsData:v,updateTipVisibility:g,updateTipFocusFunction:O,onInEditMarkerChange:function(e){var t=e.markers[e.inEditMarkerIndex],r=s.current.inEditMarker;s.current.inEditMarker=t,r&&r.uuid!==(null===t||void 0===t?void 0:t.uuid)&&g({marker:r,visibile:!1,type:"inEdit"}),t&&t!==r&&g({marker:t,visibile:!0,type:"inEdit"}),o&&o(e)}}))}))}},se=function(e,t){var r=Object(n.useState)(e),a=Object(c.a)(r,2),i=a[0],o=a[1];return Object(n.useEffect)((function(){var r=setTimeout((function(){o(e)}),t);return function(){return clearTimeout(r)}}),[e,t]),i},de=["visibleTipsData","updateTipVisibility","onInEditMarkerChange"],le=function(e){return Object(n.forwardRef)((function(t,r){var a=t.visibleTipsData,i=t.updateTipVisibility,o=t.onInEditMarkerChange,c=Object(l.a)(t,de),u=Object(n.useRef)(),s=Object(n.useRef)({});s.current.visibleTipsData=a,s.current.updateTipVisibility=i,Object(n.useEffect)((function(){var e=u.current,t=function(e){var t=s.current.inEditMarker;if("ArrowDown"!==e.key&&"ArrowUp"!==e.key||!t)s.current.updateTipVisibility({visibile:!1,type:"keyboard"});else{s.current.updateTipVisibility({marker:t,visibile:!0,type:"keyboard"});var r=t.uuid;setTimeout((function(){var t=s.current.visibleTipsData[r];(null===t||void 0===t?void 0:t.focus)&&t.focus({delta:"ArrowDown"===e.key?1:-1})})),e.preventDefault(),e.stopPropagation()}};return e.addEventListener("keydown",t),function(){return e.removeEventListener("keydow",t)}}),[]);return Object(k.jsx)(e,Object(d.a)({ref:v(r,u),onInEditMarkerChange:function(e){var t=e.markers[e.inEditMarkerIndex],r=s.current.inEditMarker;r&&r.uuid!==(null===t||void 0===t?void 0:t.uuid)&&s.current.updateTipVisibility({visibile:!1,type:"keyboard"}),s.current.inEditMarker=t,o&&o(e)},visibleTipsData:a,updateTipVisibility:i},c))}))},fe=["id","updateTipVisibility"],pe=function(e){return Object(n.forwardRef)((function(t,r){var a=t.id,i=t.updateTipVisibility,o=Object(l.a)(t,fe),c=Object(n.useRef)(),u=Object(n.useRef)({});return u.current.updateTipVisibility=i,Object(n.useEffect)((function(){var e=u.current,t=function(t){for(var r=t.target,n=!1,i=!1,o=!1;r;){var c,u;if(n=r.id===a,i=(null===(c=r.dataset)||void 0===c?void 0:c.tipForTextarea)===a,o=(null===(u=r.dataset)||void 0===u?void 0:u.tipAnchorForTextarea)===a,n||i||o)break;r=r.parentNode}if(n||i||o){var s=o&&r.dataset.tipAnchorForMarker;e.updateTipVisibility({visibile:!1,type:"clickOnTip",hideAction:function(e){var t=e.markerUuid;e.visiblityStack;return t!==s?ae:ne}}),o?e.updateTipVisibility({marker:s,visibile:ie,type:"clickOnTip",hideAction:function(){return 1}}):i&&e.updateTipVisibility({marker:r.dataset.tipForMarker,visibile:!0,type:"clickOnTip"})}else e.updateTipVisibility({visibile:!1}),t.preventDefault()};return document.addEventListener("click",t),function(){return document.removeEventListener("click",t)}}),[a]),Object(k.jsx)(e,Object(d.a)({id:a,ref:v(r,c),updateTipVisibility:i},o))}))},be=function(e){return Object(n.forwardRef)((function(t,r){var a=Object(n.useRef)();return Object(n.useEffect)((function(){var e=a.current,t=function(e){return e.preventDefault(),!1},r=function(e){return 90!==e.keyCode&&89!==e.keyCode||!e.ctrlKey||(e.preventDefault(),!1)};return e.addEventListener("dragstart",t),e.addEventListener("dragenter",t),e.addEventListener("dragover",t),e.addEventListener("dragend",t),e.addEventListener("keydown",r),function(){e.removeEventListener("dragstart",t),e.removeEventListener("dragenter",t),e.removeEventListener("dragover",t),e.removeEventListener("dragend",t),e.removeEventListener("keydown",r)}}),[]),Object(k.jsx)(e,Object(d.a)({ref:v(r,a)},t))}))},me=["markers","imperativeRef","id"],ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"textarea";return a.a.forwardRef((function(t,r){t.markers;var a=t.imperativeRef,i=t.id,o=Object(l.a)(t,me),c=Object(n.useRef)();return Object(n.useImperativeHandle)(a,(function(){return{focus:function(e){var t=c.current;t.focus(),e&&("number"===typeof e?(t.selectionStart=e,t.selectionEnd=e):(t.selectionStart=e.selectionStart,t.selectionEnd=e.selectionEnd))}}}),[]),Object(k.jsx)(e,Object(d.a)({ref:v(r,c),id:"".concat(i,"-textarea")},o))}))},he=["ResultListComponent"],je=["id"],ke=["width","lineHeight"],Oe=function(e){var t=e.tipOptions,r=t.search,a=r.ResultsComponent,i=r.ResultItemComponent,o=r.resultItemComponentOnSelect,u=r.NoResultItemComponent,s=r.NoSearchComponent,f=r.loader,b=r.preProcessMarkerData,m=void 0===b?function(e){return e}:b,v=r.getCacheKey,h=void 0===v?function(e){return JSON.stringify(e)}:v,j=r.LoaderComponent,O=r.ErrorComponent,g=r.debounceDuration,x=t.details,y=x.Component,I=x.loader,C=x.NotFoundComponent,E=x.preProcessMarkerData,T=void 0===E?function(e){return e}:E,L=x.getCacheKey,M=void 0===L?function(e){return JSON.stringify(e)}:L,S=x.LoaderComponent,w=x.ErrorComponent,R=e.LoaderComponent,D=e.ErrorComponent,N=e.getCache,H=e.defaultDebounceDuration;g=g||H,y=function(e){var t=e.Component,r=e.NotFoundComponent,a=e.loader,i=e.preProcessMarkerData,o=e.getCacheKey,u=e.LoaderComponent,s=e.ErrorComponent,d=(0,e.getCache)();return r=r||t,function(e){var l=e.marker,f=e.updateMarker,b=Object(n.useRef)({}),m=Object(n.useState)({}),v=Object(c.a)(m,2),h=v[0],j=h.loading,O=h.error,g=v[1],x=l.data,y=l.markerData,I=i(y),C=o(I);return b.current.loadData=I,b.current.updateMarker=f,b.current.cacheKey=C,Object(n.useEffect)((function(){if(!x&&null!==x){var e=d.getItem(C);if(e||null===e)return b.current.updateMarker({data:e}),void g({});var t=new p.a;return g({loading:!0}),a(b.current.loadData,t.signal).then((function(e){var t;e=null!==(t=e)&&void 0!==t?t:null,d.setItem(C,e),C===b.current.cacheKey&&(b.current.updateMarker({data:e}),g({}))})).catch((function(e){e.aborted||C===b.current.cacheKey&&g({error:e})})),function(){return t.abort()}}}),[C,x]),j?Object(k.jsx)(u,{loadData:I}):O?Object(k.jsx)(s,{error:O}):null===x?Object(k.jsx)(r,{data:null,marker:l,updateMarker:f}):x?Object(k.jsx)(t,{data:x,marker:l,updateMarker:f}):null}}({Component:y,NotFoundComponent:C,loader:I,getCacheKey:M,preProcessMarkerData:T,LoaderComponent:S||R,ErrorComponent:w||D,getCache:N}),a=i?function(e){var t=e.ItemComponent,r=e.NoItemsComponent,a=void 0===r?function(){return"No matching entries found"}:r,i=e.ContainerComponent,o=void 0===i?function(e){var t=e.ResultListComponent,r=Object(l.a)(e,he);return Object(k.jsx)(t,Object(d.a)({},r))}:i,u=e.onSelect,s=function(e){var r=e.results,i=e.marker,o=e.updateMarker,s=e.onHide,l=e.focusParent,f=e.focusImperativeRef,p=e.menuListId,b=e.menuButtonId,m=Object(n.useState)(null),v=Object(c.a)(m,2),h=v[0],j=v[1];Object(n.useImperativeHandle)(f,(function(){return{focus:function(e){var t=e.start,r=e.end,n=e.delta,a=e.index;j(t?0:r?-1:null!=n?function(e){return null==e?n>0?n-1:n:e+n}:a)}}}),[]);var O,g,x=function(e){var t,r,n=u({selectedItem:e,marker:i});o(Object(d.a)(Object(d.a)({data:e},n),{},{isLocked:null===(t=n.isLocked)||void 0===t||t,cursor:null!==(r=n.cursor)&&void 0!==r?r:"end"})),setTimeout((function(){return s()}))},y=null==h?null:(O=h,g=r.length,O<0?g-1-(-O-1)%g:O%g),I=Object(n.useRef)();return Object(n.useEffect)((function(){if(null!=y&&I.current){I.current.focus();var e=setTimeout((function(){document.activeElement!==I.current&&"-1"===document.activeElement.getAttribute("tabIndex")&&(document.activeElement.removeAttribute("tabIndex"),I.current.focus())}));return function(){return clearTimeout(e)}}}),[y]),r.length?Object(k.jsx)("ul",{role:"menu",id:p,"aria-labelledby":b,className:"search-results-list",onKeyDown:function(e){if("ArrowDown"===e.key){var t=y+1;t<r.length?j(t):(j(null),l()),e.preventDefault(),e.stopPropagation()}else if("ArrowUp"===e.key){var n=y-1;n>=0?j(n):(j(null),l()),e.preventDefault(),e.stopPropagation()}else"ArrowLeft"===e.key?(j(null),s({start:!0}),e.preventDefault(),e.stopPropagation()):"ArrowRight"===e.key?(j(null),l(),e.preventDefault(),e.stopPropagation()):"Enter"===e.key&&r[y]&&(x(r[y]),e.preventDefault(),e.stopPropagation())},children:r.map((function(e,r){return Object(k.jsx)("li",{role:"none",children:Object(k.jsx)("a",{ref:function(e){y===r&&(I.current=e)},role:"menuitem",tabIndex:"-1",className:"search-results-list-item".concat(y===r?" search-results-list-item--focused":""),onClick:function(){return x(e)},children:Object(k.jsx)(t,{item:e,marker:i})})},r)}))}):Object(k.jsx)(a,{marker:i})};return function(e){return Object(k.jsx)(o,Object(d.a)({ResultListComponent:s},e))}}({ItemComponent:i,NoItemsComponent:u,ContainerComponent:a,onSelect:o}):a;var V=N(),P=j||R,F=O||D;return function(e){var t,r=e.marker,i=e.focusParent,o=e.onHide,u=e.markersHandlers,d=e.focusImperativeRef,l=e.menuListId,b=e.menuButtonId,v=Object(n.useRef)({}),j=r.markerData,O=null!==(t=m(j))&&void 0!==t?t:null,x=Object(n.useState)({}),I=Object(c.a)(x,2),C=I[0],E=C.loading,T=C.error,L=C.results,M=C.resultsCacheKey,S=I[1];v.current.isLocked=r.isLocked,v.current.onHide=o,v.current.searchData=O;var w=null!=O?h(O):null,R=se(w,g);return Object(n.useEffect)((function(){if(v.current.isLocked)S({});else{if(v.current.cacheKey=R,null===R)return s||v.current.onHide(),void S({});var e=V.getItem(R);if(!e){var t=new p.a;return S({loading:!0}),f(v.current.searchData,t.signal).then((function(e){v.current.isLocked||(V.setItem(R,e),v.current.cacheKey===R&&S({results:e,resultsCacheKey:R}))})).catch((function(e){v.current.isLocked||e.aborted||v.current.cacheKey===R&&S({error:e})})),function(){return t.abort()}}S({results:e,resultsCacheKey:R})}}),[R]),r.isLocked?Object(k.jsx)(y,{marker:r,focusParent:i,onHide:o,focusImperativeRef:d,menuListId:l,menuButtonId:b,updateMarker:function(e){u.updateMarker(r,e)}}):E?Object(k.jsx)(P,{loadData:O}):T?Object(k.jsx)(F,{error:T}):null===w&&s?Object(k.jsx)(s,{searchData:O,marker:r,focusParent:i,onHide:o}):L&&M===w?Object(k.jsx)(a,{results:L,marker:r,focusParent:i,onHide:o,focusImperativeRef:d,menuListId:l,menuButtonId:b,updateMarker:function(e){u.updateMarker(r,e)}}):null}},ge=function(e){var t=e.tipsOptionsByType,r=e.LoaderComponent,a=void 0===r?function(){return"Loading..."}:r,i=e.ErrorComponent,o=void 0===i?function(e){var t=e.error;return(null===t||void 0===t?void 0:t.message)||"Oops"}:i,c=e.defaultDebounceDuration,u=e.getCache,s={};for(var d in t)s[d]=Oe({tipOptions:t[d],LoaderComponent:a,ErrorComponent:o,defaultDebounceDuration:c,getCache:u});return function(e){var t=e.marker,r=e.focusParent,a=e.onHide,i=e.markersHandlers,o=e.focusImperativeRef,c=e.menuListId,u=e.menuButtonId,d=Object(n.useRef)({});d.current.onHide=a;var l=s[t.type];return Object(n.useEffect)((function(){l||d.current.onHide()}),[l]),l?Object(k.jsx)(l,{marker:t,focusParent:r,onHide:a,markersHandlers:i,focusImperativeRef:o,menuListId:c,menuButtonId:u}):null}},xe=function(){var e={};return{getItem:function(t){return e[t]},setItem:function(t,r){e[t]=r}}},ye=function(e){var t=e.anchors,r=e.version,a=e.LoaderComponent,i=e.ErrorComponent,o=e.hideTipOnEscape,c=void 0===o||o,u=e.defaultDebounceDuration,s=void 0===u?300:u,f=e.getId,p=void 0===f?function(){return"".concat(Math.round(999999*Math.random()),"-").concat(Date.now())}:f,b=e.classNameGetters,m=e.getCache,v=e.backgroundColor,h=e.defaultLineHeight,j=e.defaultWidth,O=e.TextArea,g=e.tipsZIndex;m=m?function(e){return function(){var t=e();return{getItem:function(e){try{return t.getItem(e)}catch(r){return void console.error("error getting cache item",r)}},setItem:function(e,r){try{t[e]=r}catch(n){console.error("error setting cache item",n)}}}}}(m):xe;var x={},I=[];return t.forEach((function(e){x[e.type]={search:e.searchOptions,details:e.detailsOptions},I.push({anchorChar:e.anchorChar,type:e.type,parts:e.parts})})),function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"textarea";return Object(n.forwardRef)((function(r,a){var i=r.id,o=Object(l.a)(r,je),c=Object(n.useRef)(i||e()).current;return Object(k.jsx)(t,Object(d.a)({ref:a,id:c},o))}))}}(p)(function(e){var t=e.defaultLineHeight,r=void 0===t?"135%":t,n=e.defaultWidth;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"textarea";return function(t){var a,i,o,c,u=t.width,s=t.lineHeight,f=Object(l.a)(t,ke);return Object(k.jsx)(e,Object(d.a)(Object(d.a)({},f),{},{style:Object(d.a)(Object(d.a)({},f.style),{},{width:null!==(a=null!==u&&void 0!==u?u:null===(i=f.style)||void 0===i?void 0:i.width)&&void 0!==a?a:n,lineHeight:null!==(o=null!==s&&void 0!==s?s:null===(c=f.style)||void 0===c?void 0:c.lineHeight)&&void 0!==o?o:r})}))}}}({defaultLineHeight:h,defaultWidth:j})(ue({hideOnEscape:c,TipComponent:ge({tipsOptionsByType:x,LoaderComponent:a,ErrorComponent:i,defaultDebounceDuration:s,getCache:m})})(pe(le(Y({classNameGetters:b,tipsZIndex:g,defaultBackgroundColor:v})(Q(R({markerParserOptions:{version:r,anchors:I}})(y(ee(be(ve(O))))))))))))},Ie=(r(25),["ResultListComponent"]),Ce=[{id:"mo",name:"Mohammad Amin",imageUrl:"./img/img (2).jpg"},{id:"lara",name:"Lara Croft",imageUrl:"./img/img (1).png"},{id:"john",name:"John Doe",imageUrl:"./img/img (1).jpg"},{id:"jane",name:"Jane Doe",imageUrl:"./img/img (2).png"},{id:"bilz",name:"Bilal Harb",imageUrl:"./img/img (3).jpg"},{id:"paul",name:"Paul Pogba",imageUrl:"./img/img (3).png"},{id:"nitin",name:"Nitin Picktach",imageUrl:"./img/img (4).png"}],Ee=[{id:"spoon",name:"Spoon",details:"To eat soup"},{id:"fork",name:"Fork",details:"To eat fries"},{id:"spork",name:"Spork",details:"Multi purpose"},{id:"knife",name:"Knife",details:"To cut food"},{id:"plate",name:"Plate",details:"Food container"},{id:"pencil",name:"Pencil",imageUrl:"/img/img (3).jpg",details:"To write down notes"},{id:"Pen",name:"Pen",details:"To write in exams"}],Te=ye({version:0,anchors:[{anchorChar:"@",type:"person",parts:[{key:"name"}],searchOptions:{ResultItemComponent:function(e){var t=e.item;return Object(k.jsxs)("div",{className:"person-item",children:[Object(k.jsx)("img",{src:t.imageUrl,alt:"person"}),"\xa0",t.name]})},NoResultItemComponent:function(){return"No matching people found"},resultItemComponentOnSelect:function(e){var t=e.selectedItem;return{textValue:t.name,markerData:{id:t.id}}},loader:function(e,t){return function(e,t){return new Promise((function(r,n){var a=setTimeout((function(){r(Ce.filter((function(t){var r;return null===(r=t.name)||void 0===r?void 0:r.trim().toLocaleLowerCase().includes(null===e||void 0===e?void 0:e.trim().toLowerCase())})))}),1e3+2e3*Math.random());t.addEventListener("abort",(function(){var e=new Error("aborted");e.aborted=!0,clearTimeout(a),n(e)}))}))}(e.name,t)},getCacheKey:function(e){var t=e.name;return(null===t||void 0===t?void 0:t.trim().toLowerCase())||null},debounceDuration:350},detailsOptions:{Component:function(e){var t=e.data;return Object(k.jsx)("div",{className:"person-details-container",children:Object(k.jsx)("img",{src:t.imageUrl,alt:"person"})})},NotFoundComponent:function(e){var t=e.updateMarker,r=Object(n.useState)(4),a=Object(c.a)(r,2),i=a[0],o=a[1],u=Object(n.useRef)();u.current=t,Object(n.useEffect)((function(){var e=setInterval((function(){o((function(e){return e-1}))}),1e3);return function(){return clearInterval(e)}}),[]);var s=0===i;return Object(n.useEffect)((function(){s&&u.current(null)}),[s]),Object(k.jsxs)("b",{children:["Person not found! will delete in ",i]})},loader:function(e,t){return function(e,t){return new Promise((function(r,n){var a=setTimeout((function(){r(Ce.find((function(t){return t.id===e})))}),500+1e3*Math.random());t.addEventListener("abort",(function(){var e=new Error("aborted");e.aborted=!0,clearTimeout(a),n(e)}))}))}(e.id,t)},getCacheKey:function(e){return e.id}}},{anchorChar:"#",type:"thing",parts:[{key:"name"}],searchOptions:{ResultsComponent:function(e){var t=e.ResultListComponent,r=Object(l.a)(e,Ie);return Object(k.jsxs)("p",{children:[Object(k.jsx)("h5",{children:"Found the following things:"}),Object(k.jsx)(t,Object(d.a)({},r))]})},NoSearchComponent:function(){return Object(k.jsxs)("pre",{children:["Write something to start the search.",Object(k.jsx)("br",{}),"This custom no search message is only configured for things"]})},ResultItemComponent:function(e){var t=e.item;return Object(k.jsx)("div",{className:"thing-item",children:t.name})},resultItemComponentOnSelect:function(e){var t=e.selectedItem;return{textValue:t.name,markerData:{id:t.id}}},loader:function(e,t){return function(e,t){return new Promise((function(r,n){var a=setTimeout((function(){r(Ee.filter((function(t){var r;return null===(r=t.name)||void 0===r?void 0:r.trim().toLocaleLowerCase().includes(null===e||void 0===e?void 0:e.trim().toLowerCase())})))}),1e3+2e3*Math.random());t.addEventListener("abort",(function(){var e=new Error("aborted");e.aborted=!0,clearTimeout(a),n(e)}))}))}(e.name,t)},getCacheKey:function(e){var t=e.name;return(null===t||void 0===t?void 0:t.trim().toLowerCase())||null},debounceDuration:350},detailsOptions:{Component:function(e){var t=e.data;return Object(k.jsxs)("div",{children:[Object(k.jsx)("h5",{children:t.name}),Object(k.jsx)("p",{children:t.details})]})},loader:function(e,t){return function(e,t){return new Promise((function(r,n){var a=setTimeout((function(){r(Ee.find((function(t){return t.id===e})))}),500+1e3*Math.random());t.addEventListener("abort",(function(){var e=new Error("aborted");e.aborted=!0,clearTimeout(a),n(e)}))}))}(e.id,t)},getCacheKey:function(e){return e.id}}}],ErrorComponent:function(e){return e.error.message},LoaderComponent:function(){return Object(k.jsx)("h5",{children:Object(k.jsx)("b",{children:"Loading..."})})},hideTipOnEscape:!0}),Le=Ce.map((function(e){return e.name})).join(", "),Me=Ee.map((function(e){return e.name})).join(", "),Se=function(){var e=Object(n.useState)([]),t=Object(c.a)(e,2),r=t[0],a=t[1],i=Object(n.useState)([]),o=Object(c.a)(i,2),u=o[0],d=o[1];return Object(k.jsxs)("div",{className:s.a.container,children:[Object(k.jsxs)("ul",{children:[Object(k.jsxs)("li",{children:["use @ to trigger person marker start. Available people to search:",Object(k.jsx)("ul",{children:Object(k.jsx)("li",{children:Le})}),"people marker color is the default gray color"]}),Object(k.jsxs)("li",{children:["use # to trigger things marker start. Available things to search:",Object(k.jsx)("ul",{children:Object(k.jsx)("li",{children:Me})}),"things marker color is a custom orange color"]})]}),Object(k.jsx)(Te,{className:"smart-text-area",initValue:"Mohammad Amin is the author of this component\nJohn Doe is a generic male name\nJane Doe is a generic female name\nasdfg is a name not in our database\n\nFork, Knife and Spoon are kitchen utensils we eat with",initMarkers:[{start:0,end:13,type:"person",markerData:{id:"mo"}},{start:46,end:54,type:"person",markerData:{id:"john"}},{start:78,end:86,type:"person",markerData:{id:"jane"}},{start:112,end:117,type:"person",markerData:{id:"asdfg"}},{start:149,end:153,type:"thing",markerData:{id:"fork"}},{start:155,end:160,type:"thing",markerData:{id:"knife"}},{start:165,end:170,type:"thing",markerData:{id:"spoon"}}],onMarkersChange:function(e){a(e.markers)},onInEditMarkerChange:function(e){d(e.markers[e.inEditMarkerIndex])}}),Object(k.jsxs)("p",{children:[Object(k.jsx)("h5",{children:"Markers:"}),Object(k.jsx)("pre",{children:r.map((function(e){return Object(k.jsx)("div",{className:e.uuid===(null===u||void 0===u?void 0:u.uuid)?s.a.inEditMarker:"",children:JSON.stringify(e,null,3)})}))})]})]})};o.a.render(Object(k.jsx)(Se,{}),document.getElementById("root"))}},[[26,1,2]]]);
//# sourceMappingURL=main.7fb4b5ec.chunk.js.map