(this["webpackJsonpsmart-textarea"]=this["webpackJsonpsmart-textarea"]||[]).push([[0],{11:function(e,t,r){e.exports={inEditMarker:"App_inEditMarker__2hzif"}},18:function(e,t,r){},25:function(e,t,r){},26:function(e,t,r){"use strict";r.r(t);var n=r(1),a=r.n(n),i=r(10),o=r.n(i),c=r(4),u=r(11),s=r.n(u),d=r(0),l=r(3),f=(r(18),r(12)),p=r.n(f),b=r(6),v=r(5),m=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=function(e){for(var r=0;r<t.length;r++){var n=t[r];"function"===typeof n?n(e):"string"===typeof n||n&&(n.current=e)}};return n},h=function(e,t,r){var a=Object(n.useRef)({}),i=Object(n.useRef)({}),o=function(){var t,r,n=Object(d.a)(Object(d.a)({},a.current.children),a.current.current);i.current=n,r=n,"function"===typeof(t=e)?t(r):t&&(t.current=r)};return Object(n.useImperativeHandle)((function(e){a.current.current=e,o()}),t,r),[function(e){a.current.children=e,o()},i,a]},j=function(e){var t=e.selection,r=e.lastKey,n=t.markers,a=t.markerWithStartTouchedIndex,i=t.markerWithEndTouchedIndex;if(t.selectionStart!==t.selectionEnd)return{block:!1};var o=n[a],c=n[i];if("Backspace"===r){if(c&&c.isLocked)return{block:!0,selectionStart:c.start,selectionEnd:c.end}}else if("Delete"===r&&o&&o.isLocked)return{block:!0,selectionStart:o.start,selectionEnd:o.end};return{block:!1}},k=r(2),O=["onSelectionChange","markers"],g=function(e){for(var t,r,n=e.markers,a=e.selectionStart,i=e.selectionEnd,o={startIndex:-1,endIndex:-1},c=-1,u=-1,s=-1,d=-1,l=-1,f=0,p=function(){var e,a;return{markers:n,selectedMarkersRange:o,startSelectedMarkerIndex:c,endSelectedMarkerIndex:u,midSelectedMarkerIndex:s,markerWithStartTouchedIndex:d,markerWithEndTouchedIndex:l,prevMarkerIndex:t,nextMarkerIndex:(null!==(e=r)&&void 0!==e?e:-1)>=n.length?-1:null!==(a=r)&&void 0!==a?a:-1}};f<n.length&&n[f].end<a;f++);t=f-1;var b=n[f];if(!b)return p();if(b.end===a&&(l=t=f,f++,!(b=n[f])))return p();if(b.start>=i)return r=f,b.start===i&&(d=f),p();var v=a<=b.start&&b.start<i,m=a<b.end&&b.end<=i,h=v&&m;if(!v&&!m)return s=f,p();if(!h){if(v)return c=f,r=f+1,p();if(u=f,f++,!(b=n[f]))return p();if(v=a<=b.start&&b.start<i,m=a<b.end&&b.end<=i,!(h=v&&m))return v?(r=f+1,c=f):(r=f,b.start===i&&(d=f)),p()}for(o.startIndex=f,f++;f<n.length;f++)if(v=a<=(b=n[f]).start&&b.start<i,m=a<b.end&&b.end<=i,!(h=v&&m)){v?(r=f+1,c=f):(r=f,b.start===i&&(d=f));break}return o.endIndex=f,p()},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"textarea";return Object(n.forwardRef)((function(t,r){var a=t.onSelectionChange,i=t.markers,o=Object(l.a)(t,O),c=Object(n.useRef)({}),u=Object(n.useRef)();return Object(n.useEffect)((function(){var e=u.current,t=function(){c.current.pointerDown=!0},r=function(){c.current.pointerDown=!1};return e.addEventListener("pointerdown",t),document.addEventListener("pointerup",r),function(){e.removeEventListener("pointerdown",t),document.removeEventListener("pointerup",r)}}),[]),Object(k.jsx)(e,Object(d.a)(Object(d.a)({ref:m("withSelectionBlocker",r,u)},o),{},{markers:i,onSelectionChange:function(e){var t=e.target,r=t.selectionStart,n=t.selectionEnd,o=r===n,u=r,s=n,l=c.current.selection,f=l&&(null===l||void 0===l?void 0:l.start)!==r?r-l.start:0,p=l&&(null===l||void 0===l?void 0:l.end)!==n?n-l.end:0,b=g({markers:i,selectionStart:r,selectionEnd:n}),v=b.midSelectedMarkerIndex,m=b.markerWithEndTouchedIndex,h=b.endSelectedMarkerIndex,j=b.selectedMarkersRange,k=b.startSelectedMarkerIndex,O=b.markerWithStartTouchedIndex,x=b.prevMarkerIndex,C=b.nextMarkerIndex;if(v>=0){var y=i[v];y.isLocked&&(o?(f<0?(u=s=y.start,O=v):(u=s=y.end,m=v),v=-1):(u=y.start,s=y.end,j.startIndex=v,j.endIndex=v,v=-1))}else{if(h>=0){var I=i[h];I.isLocked&&(f<0?(u=I.start,j.startIndex=h,-1===j.endIndex&&(j.endIndex=h),h=-1):(u=I.end,m=h,h=-1))}if(k>=0){var E=i[k];E.isLocked&&(p>0?(s=E.end,j.endIndex=k,-1===j.startIndex&&(j.startIndex=k),k=-1):(s=E.start,O=k,k=-1))}}n!==s&&(t.selectionEnd=s),r!==u&&(t.selectionStart=u),c.current.pointerDown||(c.current.selection={start:u,end:s}),a&&a(Object(d.a)(Object(d.a)({},e),{},{markers:i,selectionStart:u,selectionEnd:s,prevMarkerIndex:x,midSelectedMarkerIndex:v,markerWithEndTouchedIndex:m,endSelectedMarkerIndex:h,selectedMarkersRange:j,startSelectedMarkerIndex:k,markerWithStartTouchedIndex:O,nextMarkerIndex:C}))}}))}))},C=["initValue","initMarkers","onInput","onChange","onSelectionChange","onMarkersChange","onInEditMarkerChange","imperativeRef"],y=["textValue"],I=!0,E={" ":I,"\t":I,"\r":I,"\n":I,"\v":I,"\0":I},M=function(e,t){return e.substring(t.start,t.end)},L=function(e){var t=e.uuid,r=e.anchor,n=e.type,a=e.start,i=e.end,o=e.markerData,c=void 0===o?{}:o,u=e.data,s=e.isLocked,d=void 0!==s&&s;return{uuid:null!==t&&void 0!==t?t:"".concat(Math.round(999999*Math.random()),"-").concat(Date.now()),anchor:r,type:n,start:a,end:i,markerData:c,data:u,isLocked:d}},T=function(e,t){for(var r=0,n=t.anchors,a=[];r<e.length;){for(var i=void 0;r<e.length;){if((0===r||E[e[r-1]])&&n[e[r]]){i=n[e[r]];break}r++}if(!i)break;var o=r;r=o+1;for(var c={},u=i.parts,s=0;s<u.length;s++){var d=u[s],l=d.key,f=d.startChar,p=d.endChars;if(f){if(e[r]!==f)break;r++}for(var b=r;r<e.length&&!p[e[r]];)r++;if(c[l]=e.substring(b,r),r>=e.length||p[e[r]]===I)break;1===p[e[r]]&&r++}a.push({anchor:i.anchorChar,type:i.type,version:t.version,start:o,end:r,markerData:c})}return a},S=function(e,t){return function(r,n,a){var i=e(r,t).map((function(e,t){return L(Object(d.a)(Object(d.a)(Object(d.a)({isLocked:!1},0===t&&0===e.start?a:{}),e),{},{uuid:0===t&&0===e.start&&a?a.uuid:null,start:e.start+n,end:e.end+n,value:r}))}));return[r,i]}},w=function(e){var t=e.markers,r=e.prevValue,n=e.selectionStart,a=e.selectionEnd,i=e.insertedText,o=e.prevMarkerIndex,u=e.midSelectedMarkerIndex,s=e.markerWithEndTouchedIndex,l=e.endSelectedMarkerIndex,f=e.nextMarkerIndex,p=e.markerParser,b=r.substring(0,n)+i+r.substring(a),m=b.length-r.length,h=-1,j=[];if(u>=0){var k;h=u;var O,g,x=t[u];if(x.isLocked)n=a=x.end,(O=j).push.apply(O,Object(v.a)(t.slice(0,u+1))),m=i.length,b=r.substring(0,n)+i+r.substring(a);else(g=j).push.apply(g,Object(v.a)(t.slice(0,u))),j.push(Object(d.a)(Object(d.a)({},x),{},{end:a}));(k=j).push.apply(k,Object(v.a)(t.slice(u+1).map((function(e){return Object(d.a)(Object(d.a)({},e),{},{start:e.start+m,end:e.end+m})}))))}else{var C;if(s>=0)h=s,(C=j).push.apply(C,Object(v.a)(t.slice(0,s+1)));else if(l>=0){h=l;var y,I,E=t[l];if(E.isLocked)n=a=E.end,(y=j).push.apply(y,Object(v.a)(t.slice(0,l+1))),m=i.length,b=r.substring(0,n)+i+r.substring(a);else(I=j).push.apply(I,Object(v.a)(t.slice(0,l))),j.push(Object(d.a)(Object(d.a)({},E),{},{end:n}))}else if(o>=0){var M;(M=j).push.apply(M,Object(v.a)(t.slice(0,o+1)))}if(f>=0){var L,T=t.slice(f).map((function(e){return Object(d.a)(Object(d.a)({},e),{},{start:e.start+m,end:e.end+m})}));f=j.length,(L=j).push.apply(L,Object(v.a)(T)),f=f>=j.length?-1:f}}var S=j[h];if(S&&!S.isLocked){var w=S.start,R=f>=0?j[f].start:b.length,D=b.substring(w,R),N=p(D,w,S),H=Object(c.a)(N,2),V=H[0],P=H[1];if(V!==D){var F=V-D;if(F&&f>=0)for(var W=f;W<j.length;W++){var K=j[W];j[W]=Object(d.a)(Object(d.a)({},K),{},{start:K.start+F,end:K.end+F})}b=b.substring(0,w)+V+b.substring(R)}j=[].concat(Object(v.a)(j.slice(0,h)),Object(v.a)(P),Object(v.a)(j.slice(h+1)))}else{var A=o>=0?j[o].end:0,B=f>=0?j[f].start:b.length,z=b.substring(A,B),U=p(z,A),J=Object(c.a)(U,2),G=J[0],X=J[1];if(G!==z){var Y=G-z;if(Y&&f>=0)for(var _=f;_<j.length;_++){var q=j[_];j[_]=Object(d.a)(Object(d.a)({},q),{},{start:q.start+Y,end:q.end+Y})}b=b.substring(0,A)+G+b.substring(B)}var Q=[];o>=0&&Q.push.apply(Q,Object(v.a)(j.slice(0,o+1))),Q.push.apply(Q,Object(v.a)(X)),f>=0&&Q.push.apply(Q,Object(v.a)(j.slice(f))),j=Q}return{newValue:b,newMarkers:j,selectionStart:n,selectionEnd:a}},R=function(e){return e.midSelectedMarkerIndex>=0?e.midSelectedMarkerIndex:e.endSelectedMarkerIndex>=0?e.endSelectedMarkerIndex:e.markerWithEndTouchedIndex>=0?e.markerWithEndTouchedIndex:-1},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.markerParser,r=void 0===t?T:t,a=e.markerParserOptions,i=void 0===a?{version:0,anchors:[{anchorChar:"@",type:"person",parts:[{key:"username"}]},{anchorChar:"#",type:"rfi",parts:[{key:"rifId"}]}]}:a;if(r===T){var o={};i.anchors.forEach((function(e){var t=e.parts.map((function(e,t,r){var n,a=e.startChar,i=e.endChar;return{key:e.key,startChar:a,endChars:Object(d.a)(Object(d.a)({},i?Object(b.a)({},i,1):E),(null===(n=r[t+1])||void 0===n?void 0:n.startChar)?Object(b.a)({},r[t+1].startChar,2):null)}}));o[e.anchorChar]=Object(d.a)(Object(d.a)({},e),{},{parts:t})})),i=Object(d.a)(Object(d.a)({},i),{},{anchors:o})}return r=S(r,i),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"textarea";return Object(n.forwardRef)((function(t,a){var i=t.initValue,o=t.initMarkers,u=t.onInput,s=t.onChange,f=t.onSelectionChange,p=t.onMarkersChange,b=t.onInEditMarkerChange,O=t.imperativeRef,x=Object(l.a)(t,C),I=Object(n.useRef)();I.current=I.current||{value:null!==i&&void 0!==i?i:"",markers:(null!==o&&void 0!==o?o:[]).map((function(e){return L(Object(d.a)(Object(d.a)({},e),{},{isLocked:!0}))}))},I.current.onMarkersChange=p;var E=Object(n.useRef)();(x.value||x.markers)&&(console.warn('Do not use props "value" and "markers". Use "initValue" and "initMarkers" instead'),delete x.markers,delete x.value);var T=Object(n.useState)(I.current.value),S=Object(c.a)(T,2),D=S[0],N=S[1],H=Object(n.useState)(I.current.markers),V=Object(c.a)(H,2),P=V[0],F=V[1],W=function(e){I.current.value=e,N(e)},K=function(e){I.current.markers=e,F(e)},A=h(O,(function(){return{updateMarker:function(e,t){return function(e,t){var r=I.current.markers,n=I.current.value,a=r.findIndex((function(t){return t.uuid===e.uuid}));if(a<0)return!1;e=r[a];var i=function(t){if(!t&&null!==t)return e;var i,o,c=null;if(t){var u,f,b=t.textValue,m=Object(l.a)(t,y),h=null!=b,j=h?b.length-(e.end-e.start):0;o=Object(v.a)(r.slice(0,a)),c=Object(d.a)(Object(d.a)({},e),{},{end:h?e.start+b.length:e.end},m),o.push(c),j?(u=o).push.apply(u,Object(v.a)(r.slice(a+1).map((function(e){return Object(d.a)(Object(d.a)({},e),{},{start:e.start+j,end:e.end+j})})))):(f=o).push.apply(f,Object(v.a)(r.slice(a+1))),i=n,h&&(i=[n.substring(0,e.start),b,n.substring(e.end)].join(""),W(i)),K(o)}else{var k=e,O=k.start,g=k.end-O;i=n.substring(0,e.start)+n.substring(e.end),o=[].concat(Object(v.a)(r.slice(0,a)),Object(v.a)(r.slice(a+1).map((function(e){return Object(d.a)(Object(d.a)({},e),{},{start:e.start-g,end:e.end-g})})))),W(i),K(o)}return p&&p({target:E.current,init:!1,value:i,oldValue:n,markers:o,oldMarkers:r}),s&&s({target:E.current,value:i,markers:o,inEditMarker:I.current.inEditMarker}),c};return i("function"===typeof t?t(e):t)}(e,(function(e){if("function"===typeof t&&(t=t(e)),t){var r,n,a;if(e.isLocked)n=!0,!1===t.isLocked&&console.warn("cannot unloack a locked marker. Will keep it locked!");else n=null!==(a=t.isLocked)&&void 0!==a&&a;return{isLocked:n,textValue:t.textValue,data:void 0===t.data?e.data:t.data,markerData:null!==(r=t.markerData)&&void 0!==r?r:e.markerData}}return t}))}}}),[]),B=Object(c.a)(A,1)[0];Object(n.useEffect)((function(){var e=E.current,t=function(e){I.current.lastKeyDown=e.key};return e.addEventListener("keydown",t),function(){e.removeEventListener("keydown",t)}}),[]),Object(n.useEffect)((function(){var e=E.current,t=I.current.onMarkersChange;t&&t({target:e,init:!0,value:I.current.value,oldValue:"",markers:I.current.markers,oldMarkers:[]})}),[]);return Object(k.jsx)(e,Object(d.a)(Object(d.a)({},x),{},{ref:m("withMarkerParser",a,E),imperativeRef:B,value:D,markers:P,onInput:function(e){var t=e.target,n=t.value,a=D;if(a===n)return!0;var i=I.current.selection,o=j({selection:i,lastKey:I.current.lastKeyDown});if(o.block)return t.value=a,t.selectionStart=o.selectionStart,t.selectionEnd=o.selectionEnd,e.preventDefault(),!1;var c=i,s=c.selectionStart,l=c.selectionEnd,f="",v=s!==l,m=!v&&"Delete"===I.current.lastKeyDown,h=!v&&"Backspace"===I.current.lastKeyDown;if(m||h){var k=a.length-n.length;m?l=s+k:s-=k;var O=g({markers:P,selectionStart:s,selectionEnd:l});i=Object(d.a)({selectionStart:s,selectionEnd:l,inEditMarkerIndex:R(O)},O)}else f=n.substring(s,t.selectionEnd);var x=i,C=x.prevMarkerIndex,y=x.midSelectedMarkerIndex,E=x.markerWithEndTouchedIndex,L=x.endSelectedMarkerIndex,T=x.nextMarkerIndex,S=w({markers:P,prevValue:a,selectionStart:s,selectionEnd:l,insertedText:f,prevMarkerIndex:C,midSelectedMarkerIndex:y,markerWithEndTouchedIndex:E,endSelectedMarkerIndex:L,nextMarkerIndex:T,markerParser:r}),N=S.newValue,H=S.newMarkers;N!==n&&console.error('OOPS! input tracking is broken. Expected "'.concat(n,'" got "').concat(N,'"')),W(N),K(H);var V=i.inEditMarkerIndex,F=t.selectionEnd;t.selectionStart=F,i=Object(d.a)({selectionStart:F,selectionEnd:F},g({markers:H,selectionStart:F,selectionEnd:F}));var A=R(i);i.inEditMarkerIndex=A,I.current.selection=i;var B=P[V],z=H[A];return b&&((null===z||void 0===z?void 0:z.uuid)!==(null===B||void 0===B?void 0:B.uuid)||z&&M(N,z)!==M(a,B))&&b({target:t,value:N,oldValue:D,markers:H,oldMarkers:P,inEditMarker:z,oldInEditMarker:I.current.inEditMarker}),p&&p({target:t,init:!1,value:N,oldValue:D,markers:H,oldMarkers:P}),u&&u({target:t,value:N,markers:H,inEditMarker:z}),!0},onChange:function(e){s&&s({target:e.target,value:I.current.value,markers:I.current.markers,inEditMarker:I.current.inEditMarker})},onSelectionChange:function(e){var t,r=R(e),n=P[r];if((null===n||void 0===n?void 0:n.uuid)!==(null===(t=I.current.inEditMarker)||void 0===t?void 0:t.uuid)){var a={target:e.target,value:D,oldValue:D,markers:P,oldMarkers:P,oldInEditMarker:I.current.inEditMarker,inEditMarker:n};I.current.inEditMarker=n,b&&b(a)}I.current.selection=Object(d.a)(Object(d.a)({},e),{},{inEditMarkerIndex:r}),f&&f(I.current.selection)}}))}))}},N=r(13),H=r.n(N),V=["labelLine"],P=["anchorProps","TipComponent"],F=["lineHeight","backgroundColor","InnerComponent","TipComponent","visibleTipsData","updateTipVisibility","updateTipFocusFunction","onResize","onScroll","onMarkersChange","onInEditMarkerChange","imperativeRef","id"],W=["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing","tabSize","MozTabSize"];function K(e,t,r){var n=r&&r.debug||!1;if(n){var a=document.querySelector("#input-textarea-caret-position-mirror-div");a&&a.parentNode.removeChild(a)}var i=document.createElement("div");i.id="input-textarea-caret-position-mirror-div",document.body.appendChild(i);var o=i.style,c=window.getComputedStyle?window.getComputedStyle(e):e.currentStyle,u="INPUT"===e.nodeName;o.whiteSpace="pre-wrap",u||(o.wordWrap="break-word"),o.position="absolute",n||(o.visibility="hidden"),W.forEach((function(e){if(u&&"lineHeight"===e)if("border-box"===c.boxSizing){var t=parseInt(c.height,10),r=parseInt(c.paddingTop,10)+parseInt(c.paddingBottom,10)+parseInt(c.borderTopWidth,10)+parseInt(c.borderBottomWidth,10),n=r+parseInt(c.lineHeight,10);o.lineHeight=t>n?"".concat(t-r,"px"):t===n?c.lineHeight:0}else o.lineHeight=c.height;else o[e]=c[e]})),!u&&e.clientHeight<e.scrollHeight?o.overflowY="scroll":o.overflowY="hidden",!u&&e.clientWidth<e.scrollWidth?o.overflowX="scroll":o.overflowX="hidden";for(var s=e.value,d=[s.substring(0,t[0])],l=s.length,f=0;f<t.length;f++){if(t[f]>=l){d.push(null);break}u?(d.push(s[t[f]].replace(/\s/g,"\xa0")),d.push(s.substring(t[f]+1,t[f+1]).replace(/\s/g,"\xa0"))):(d.push(s[t[f]]),d.push(s.substring(t[f]+1,t[f+1])))}for(var p=[],b=0;b<d.length;b++){var v=document.createElement("span");null===d[b]?v.textContent=" ":v.textContent=d[b],b%2&&(p.push(v),n&&(v.style.backgroundColor="#aaa")),i.appendChild(v)}for(var m=[],h=parseInt(c.borderTopWidth,10)+parseInt(c.marginTop,10)-e.scrollTop,j=parseInt(c.borderLeftWidth,10)+parseInt(c.marginLeft,10)-e.scrollLeft,k=parseInt(c.lineHeight,10),O=0;O<p.length;O++)m.push({top:p[O].offsetTop+h,left:p[O].offsetLeft+j,height:k});return n?(o.top="0",o.right="0"):document.body.removeChild(i),m}var A=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.debug;if(!e)return[];for(var a=[],i=0;i<t.length;i++)a.push(t[i].start,t[i].end);for(var o=[],c=0;c<a.length;c++)a[c]!==a[c-1]&&o.push(a[c]);for(var u=K(e,o,{debug:n}),s=[],d=0,l=0;d<a.length;d++)s.push(u[l]),a[d]!==a[d+1]&&l++;for(var f=[],p=e.clientWidth,b=0;b<s.length;b+=2){var v=s[b],m=v.left,h=v.top,j=v.height,k=s[b+1],O=k.left,g=k.top;if(h!==g){for(var x=[{x:m,y:h,w:p-m,h:j}],C=Math.round((g-h)/j)-1,y=0;y<C;y++)x.push({x:0,y:h+(y+1)*j,w:p,h:j});x.push({x:0,y:h+(C+1)*j,w:O,h:j}),f.push(x)}else f.push([{x:m,y:h,w:O-m,h:j}])}return f},B=function(e){var t=e.x,r=e.y,n=e.w,a=e.h;return{left:"".concat(t,"px"),top:"".concat(r,"px"),height:"".concat(a,"px"),width:"".concat(n,"px")}},z=Object(n.forwardRef)((function(e,t){var r=e.labelLine,n=Object(l.a)(e,V);return Object(k.jsx)("div",Object(d.a)(Object(d.a)({ref:t},n),{},{style:B(r)}))})),U=Object(n.forwardRef)((function(e,t){var r=e.anchorProps,n=e.TipComponent,a=Object(l.a)(e,P);return Object(k.jsx)("div",Object(d.a)(Object(d.a)({ref:t},r),{},{children:Object(k.jsx)(n,Object(d.a)({},a))}))})),J=function(e){var t=e.marker,r=e.labelLines,a=e.getClassName,i=e.tipClassName,o=e.InnerComponent,u=e.TipComponent,s=e.visibleTipData,d=e.updateTipVisibility,l=e.updateTipFocusFunction,f=e.markersHandlers,p=e.textAreaId,b=Object(n.useState)(-1),v=Object(c.a)(b,2),m=v[0],h=v[1],j=null==s?m:s.labelLineIndex;!0===j&&(j=r.length-1);var O=Object(n.useRef)({}),g=function(e){clearTimeout(O.current.timer),function(e,r){null==s?h(r):d({marker:t,visibile:!0,labelLineIndex:r,type:e})}("pointerOver",e)},x=function(e){null==!s?h(-1):d({marker:t,visibile:!1,type:e})},C=function(){O.current.timer=setTimeout((function(){x("pointerOver")}),250)};Object(n.useEffect)((function(){return function(){return clearTimeout(O.current.timer)}}),[]);var y=function(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.start,a=r.delta;a=null!==(e=a)&&void 0!==e?e:0,n?f.focus(t.start-a):f.focus(t.end+a)},I=t.uuid,E=Object(n.useCallback)((function(e){l({marker:I,focus:null===e||void 0===e?void 0:e.focus})}),[l,I]),M=j>=0,L=r.length-1;return r.map((function(e,n){var c=0===n,s=n===L,d="".concat(t.uuid,"[").concat(n,"].button"),l="".concat(t.uuid,"[").concat(n,"].list"),b=u&&j===n,v=function(i){return Object(k.jsx)(z,{ref:i,id:d,role:"button","aria-haspopup":"true","aria-controls":l,"aria-expanded":b,labelLine:e,onPointerEnter:function(){return g(n)},onPointerLeave:C,onPointerDown:y,onPointerUp:y,onClick:y,"data-tip-anchor-for-textarea":p,"data-tip-anchor-for-marker":t.uuid,className:a({isFirstLine:c,isLastLine:s,isTipVisible:M}),children:o?Object(k.jsx)(o,{marker:t,markersHandlers:f,labelLine:e,labelLineIndex:n,labelLines:r}):null},n)};return b?Object(k.jsx)(H.a,{attachment:"top left",targetAttachment:"bottom left",constraints:[{to:"scrollParent",attachment:"together"},{to:"window",attachment:"together"}],renderTarget:v,renderElement:function(e){return Object(k.jsx)(U,{ref:e,focusImperativeRef:E,TipComponent:u,menuListId:l,menuButtonId:d,marker:t,markersHandlers:f,focusParent:y,onHide:function(e){x(),!1!==e&&y(e)},anchorProps:{className:i,onPointerEnter:function(){return g(n)},onPointerLeave:C,"data-tip-for-textarea":p,"data-tip-for-marker":t.uuid}})}},"visible-tip"):v()}))},G=function(e){var t=e.marker;return Object(k.jsx)("pre",{children:JSON.stringify(t,null,3)})},X=function(e){var t=e.markers,r=e.inEditMarker,n=e.labels,a=e.getClassName,i=e.getTipClassName,o=e.InnerComponent,c=e.TipComponent,u=void 0===c?G:c,s=e.visibleTipsData,l=e.updateTipVisibility,f=e.updateTipFocusFunction,p=e.markersHandlers,b=e.textAreaId;return t.map((function(e,t){var c=n[t];return c?Object(k.jsx)(J,{marker:e,labelLines:c,getClassName:function(t){return a(Object(d.a)(Object(d.a)({},t),{},{isInEdit:e.uuid===(null===r||void 0===r?void 0:r.uuid),marker:e}))},tipClassName:i({marker:e}),InnerComponent:o,TipComponent:u,visibleTipData:s?null!=s[e.uuid]&&s[e.uuid]:null,updateTipVisibility:l,updateTipFocusFunction:f,markersHandlers:p,textAreaId:b},e.uuid):null}))},Y=function(e){var t=e.labelLines,r=e.getClassName,n=t.length-1;return t.map((function(e,t){var a=0===t,i=t===n;return Object(k.jsx)(z,{labelLine:e,className:r({isFirstLine:a,isLastLine:i})})}))},_=function(e){var t=e.markers,r=e.labels,n=e.inEditMarker,a=e.visibleTipsData,i=e.getClassName;return t.map((function(e,t){var o=r[t];return o?Object(k.jsx)(Y,{labelLines:o,getClassName:function(t){return i(Object(d.a)(Object(d.a)({},t),{},{isInEdit:e.uuid===(null===n||void 0===n?void 0:n.uuid),isTipVisible:Boolean(a[e.uuid]),marker:e}))}},e.uuid):null}))},q={back:function(e){var t=e.isFirstLine,r=e.isLastLine,n=e.isInEdit,a=e.isTipVisible,i=e.marker;return"textarea-back-label textarea-back-".concat(i.type,"-label").concat(t?" textarea-back-label-first-line":"").concat(r?" textarea-back-label-last-line":"").concat(n?" textarea-back-label-inedit":"").concat(a?" textarea-back-label-tip-shown":"")},front:function(e){var t=e.isFirstLine,r=e.isLastLine,n=e.isInEdit,a=e.isTipVisible,i=e.marker;return"textarea-front-label textarea-front-".concat(i.type,"-label").concat(t?" textarea-front-label-first-line":"").concat(r?" textarea-front-label-last-line":"").concat(n?" textarea-front-label-inedit":"").concat(a?" textarea-front-label-tip-shown":"")},tip:function(e){var t=e.marker;return"textarea-tip-container textarea-tip-".concat(t.type,"-container")}},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.defaultLineHeight,r=void 0===t?"135%":t,a=e.defaultBackgroundColor,i=void 0===a?"white":a,o=e.classNameGetters,u=void 0===o?q:o;return u=Object(d.a)(Object(d.a)({},q),u),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"textarea";return Object(n.forwardRef)((function(t,a){var o,s,f=t.lineHeight,p=void 0===f?r:f,b=t.backgroundColor,v=void 0===b?i:b,h=t.InnerComponent,j=t.TipComponent,O=t.visibleTipsData,g=t.updateTipVisibility,x=t.updateTipFocusFunction,C=t.onResize,y=t.onScroll,I=t.onMarkersChange,E=t.onInEditMarkerChange,M=t.imperativeRef,L=t.id,T=Object(l.a)(t,F),S=Object(n.useRef)({markers:[]}),w=Object(n.useRef)(),R=Object(n.useRef)(),D=Object(n.useState)([]),N=Object(c.a)(D,2),H=N[0],V=N[1],P=Object(n.useState)(S.current.markers),W=Object(c.a)(P,2),K=W[0],B=W[1],z=Object(n.useState)(null),U=Object(c.a)(z,2),J=U[0],G=U[1];return Object(n.useEffect)((function(){var e=R.current;S.current.markers=K,V(A(e,K))}),[K]),Object(k.jsxs)("div",{id:L,className:"textarea-container",style:{backgroundColor:v},children:[Object(k.jsx)("div",{className:"textarea-back",children:Object(k.jsx)(_,{markers:S.current.markers,inEditMarker:J,labels:H,visibleTipsData:O,getClassName:u.back})}),Object(k.jsx)(e,Object(d.a)(Object(d.a)({ref:m(a,R)},T),{},{id:L,imperativeRef:m(w,M),style:Object(d.a)(Object(d.a)({},T.style),{},{lineHeight:null!==(o=null===(s=T.style)||void 0===s?void 0:s.lineHeight)&&void 0!==o?o:p}),onScroll:function(e){var t=R.current;V(A(t,K)),y&&y(e)},onResize:function(e){var t=R.current;V(A(t,K)),C&&C(e)},onMarkersChange:function(e){var t=e.markers;B(t),I&&I(e)},onInEditMarkerChange:function(e){var t=e.inEditMarker;G(t),E&&E(e)}})),Object(k.jsx)("div",{className:"textarea-front",children:Object(k.jsx)(X,{markers:S.current.markers,inEditMarker:J,labels:H,getClassName:u.front,getTipClassName:u.tip,InnerComponent:h,TipComponent:j,visibleTipsData:O,updateTipVisibility:g,updateTipFocusFunction:x,markersHandlers:w.current,textAreaId:L})})]})}))}},Z=["onResize"],$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"textarea";return Object(n.forwardRef)((function(t,r){var a=t.onResize,i=Object(l.a)(t,Z),o=Object(n.useRef)({});o.current.onResize=a;var c=Object(n.useRef)();return Object(n.useEffect)((function(){var e=c.current.contentWindow;return e.onresize=function(e){o.current.onResize&&o.current.onResize(e)},function(){e.onresize=null}}),[]),Object(k.jsxs)("div",{className:"textarea-with-resize-container",children:[Object(k.jsx)("iframe",{ref:c,title:"resize-frame"}),Object(k.jsx)(e,Object(d.a)({ref:r},i))]})}))},ee=["onSelectionChange"],te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"textarea";return Object(n.forwardRef)((function(t,r){var a=t.onSelectionChange,i=Object(l.a)(t,ee),o=Object(n.useRef)({});o.current.onSelectionChange=a;var c=Object(n.useRef)();return Object(n.useEffect)((function(){var e=c.current,t=function(e){var t=c.current;t===document.activeElement&&o.current.onSelectionChange&&o.current.onSelectionChange({target:t})};document.addEventListener("selectionchange",t);var r=function(e){var t=c.current;"Delete"!==e.key&&"Backspace"!==e.key||o.current.onSelectionChange({target:t})};return e.addEventListener("keyup",r),function(){document.removeEventListener("selectionchange",t),e.removeEventListener("keyup",r)}}),[]),Object(k.jsx)(e,Object(d.a)({ref:m(r,c)},i))}))},re=["onHide"],ne=["imperativeRef","onInEditMarkerChange"],ae=function(e){return function(t){var r=t.onHide,a=Object(l.a)(t,re),i=Object(n.useRef)({});return i.current.onHide=r,Object(n.useEffect)((function(){var e=function(e){"Escape"===e.key&&i.current.onHide()};return document.addEventListener("keyup",e),function(){return document.removeEventListener("keyup",e)}}),[]),Object(k.jsx)(e,Object(d.a)({onHide:r},a))}},ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.TipComponent,r=e.hideOnEscape,a=void 0===r||r;return a&&(t=ae(t)),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"textarea";return Object(n.forwardRef)((function(r,a){var i=r.imperativeRef,o=r.onInEditMarkerChange,u=Object(l.a)(r,ne),s=Object(n.useState)({data:{},dataStack:{}}),f=Object(c.a)(s,2),p=f[0].data,m=f[1],j=Object(n.useCallback)((function(e){var t=e.marker,r=e.focus,n=(null===t||void 0===t?void 0:t.uuid)||t;m((function(e){var t=e.data,a=e.dataStack;return t[n]?{data:Object(d.a)(Object(d.a)({},t),{},Object(b.a)({},n,Object(d.a)(Object(d.a)({},t[n]),{},{focus:r}))),dataStack:a}:e}))}),[]),O=Object(n.useCallback)((function(e){var t=e.marker,r=e.type,n=e.visibile,a=e.labelLineIndex,i=(null===t||void 0===t?void 0:t.uuid)||t;if(!n&&!i)return r?void m((function(e){var t=e.data,n=e.dataStack,a=Object(d.a)({},t),i=Object(d.a)({},n);for(var o in i)if(i[o]=i[o].filter((function(e){return e.type!==r})),i[o].length){var c=a[o].focus,u=i[o][i[o].length-1];a[o]={type:u.type,labelLineIndex:u.labelLineIndex,focus:c}}else delete i[o],delete a[o];return{data:a,dataStack:i}})):void m({data:{},dataStack:{}});m((function(e){var t,o=e.data,c=e.dataStack;if(!n){var u=c[i];if(u){if(r){var s=u.filter((function(e){var t=e.type;return r!==t}));if(s.length){var l=s[s.length-1];return{data:Object(d.a)(Object(d.a)({},o),{},Object(b.a)({},i,{type:l.type,labelLineIndex:l.labelLineIndex,focus:o[i].focus})),dataStack:Object(d.a)(Object(d.a)({},c),{},Object(b.a)({},i,s))}}}var f=Object(d.a)({},o);delete f[i];var p=Object(d.a)({},c);return delete p[i],{data:f,dataStack:p}}return e}return r=r||"default-inner",{data:Object(d.a)(Object(d.a)({},o),{},Object(b.a)({},i,{type:r,labelLineIndex:null===a||void 0===a||a,focus:null===(t=o[i])||void 0===t?void 0:t.focus})),dataStack:Object(d.a)(Object(d.a)({},c),{},Object(b.a)({},i,[].concat(Object(v.a)((c[i]||[]).filter((function(e){return e.type!==r}))),[{type:r,labelLineIndex:null===a||void 0===a||a}])))}}))}),[]),g=h(i,(function(){return{updateTipVisibility:O}}),[O]),x=Object(c.a)(g,1)[0];return Object(k.jsx)(e,Object(d.a)(Object(d.a)({ref:a},u),{},{imperativeRef:x,TipComponent:t,visibleTipsData:p,updateTipVisibility:O,updateTipFocusFunction:j,onInEditMarkerChange:function(e){var t=e.inEditMarker,r=e.oldInEditMarker;r&&r.uuid!==(null===t||void 0===t?void 0:t.uuid)&&O({marker:r,visibile:!1,type:"inEdit"}),t&&O({marker:t,visibile:!0,type:"inEdit"}),o&&o(e)}}))}))}},oe=["markers","imperativeRef","id"],ce=a.a.forwardRef((function(e,t){e.markers;var r=e.imperativeRef,a=e.id,i=Object(l.a)(e,oe),o=Object(n.useRef)();return Object(n.useImperativeHandle)(r,(function(){return{focus:function(e){var t=o.current;t.focus(),e&&("number"===typeof e?(t.selectionStart=e,t.selectionEnd=e):(t.selectionStart=e.selectionStart,t.selectionEnd=e.selectionEnd))}}}),[]),Object(k.jsx)("textarea",Object(d.a)({ref:m(t,o),id:"".concat(a,"-textarea")},i))})),ue=function(e,t){var r=Object(n.useState)(e),a=Object(c.a)(r,2),i=a[0],o=a[1];return Object(n.useEffect)((function(){var r=setTimeout((function(){o(e)}),t);return function(){return clearTimeout(r)}}),[e,t]),i},se=["visibleTipsData","updateTipVisibility","onInEditMarkerChange"],de=function(e){return Object(n.forwardRef)((function(t,r){var a=t.visibleTipsData,i=t.updateTipVisibility,o=t.onInEditMarkerChange,c=Object(l.a)(t,se),u=Object(n.useRef)(),s=Object(n.useRef)({});return s.current.visibleTipsData=a,s.current.updateTipVisibility=i,Object(n.useEffect)((function(){var e=u.current,t=function(e){var t=s.current.inEditMarker;if("ArrowDown"!==e.key&&"ArrowUp"!==e.key||!t)s.current.updateTipVisibility({visibile:!1,type:"keyboard"});else{s.current.updateTipVisibility({marker:t,visibile:!0,type:"keyboard"});var r=t.uuid;setTimeout((function(){var t=s.current.visibleTipsData[r];(null===t||void 0===t?void 0:t.focus)&&t.focus({delta:"ArrowDown"===e.key?1:-1})})),e.preventDefault()}};return e.addEventListener("keydown",t),function(){return e.removeEventListener("keydow",t)}}),[]),Object(k.jsx)(e,Object(d.a)({ref:m(r,u),onInEditMarkerChange:function(e){s.current.inEditMarker=e.inEditMarker,o&&o(e)},visibleTipsData:a,updateTipVisibility:i},c))}))},le=["id","updateTipVisibility"],fe=function(e){return Object(n.forwardRef)((function(t,r){var a=t.id,i=t.updateTipVisibility,o=Object(l.a)(t,le),c=Object(n.useRef)(),u=Object(n.useRef)({});return u.current.updateTipVisibility=i,Object(n.useEffect)((function(){var e=u.current,t=function(t){for(var r=t.target,n=!1;r;){var i,o;if(r.id===a||(null===(i=r.dataset)||void 0===i?void 0:i.tipForTextarea)===a||(null===(o=r.dataset)||void 0===o?void 0:o.tipAnchorForTextarea)===a){n=!0;break}r=r.parentNode}if(n){var c,u;e.updateTipVisibility({visibile:!1,type:"clickOnTip"});var s=(null===(c=r.dataset)||void 0===c?void 0:c.tipForMarker)||(null===(u=r.dataset)||void 0===u?void 0:u.tipAnchorForMarker);s&&e.updateTipVisibility({marker:s,visibile:!0,type:"clickOnTip"})}else e.updateTipVisibility({visibile:!1}),t.preventDefault()};return document.addEventListener("click",t),function(){return document.removeEventListener("click",t)}}),[a]),Object(k.jsx)(e,Object(d.a)({id:a,ref:m(r,c),updateTipVisibility:i},o))}))},pe=function(e){var t=Object(n.useRef)(void 0),r=t.current;return t.current=e,r},be=function(e){return Object(n.forwardRef)((function(t,r){var a=Object(n.useRef)();return Object(n.useEffect)((function(){var e=a.current,t=function(e){return e.preventDefault(),!1},r=function(e){return 90!==e.keyCode&&89!==e.keyCode||!e.ctrlKey||(e.preventDefault(),!1)};return e.addEventListener("dragstart",t),e.addEventListener("dragenter",t),e.addEventListener("dragover",t),e.addEventListener("dragend",t),e.addEventListener("keydown",r),function(){e.removeEventListener("dragstart",t),e.removeEventListener("dragenter",t),e.removeEventListener("dragover",t),e.removeEventListener("dragend",t),e.removeEventListener("keydown",r)}}),[]),Object(k.jsx)(e,Object(d.a)({ref:m(r,a)},t))}))},ve=["ResultListComponent"],me=["id"],he=function(e){var t=e.tipOptions,r=t.search,a=r.ResultsComponent,i=r.ResultItemComponent,o=r.resultItemComponentOnSelect,u=r.NoResultItemComponent,s=r.loader,f=r.preProcessMarkerData,b=void 0===f?function(e){return e}:f,v=r.getCacheKey,m=void 0===v?function(e){return JSON.stringify(e)}:v,h=r.LoaderComponent,j=r.ErrorComponent,O=r.debounceDuration,g=void 0===O?350:O,x=t.details,C=x.Component,y=x.loader,I=x.NotFoundComponent,E=x.preProcessMarkerData,M=void 0===E?function(e){return e}:E,L=x.getCacheKey,T=void 0===L?function(e){return JSON.stringify(e)}:L,S=x.LoaderComponent,w=x.ErrorComponent,R=e.LoaderComponent,D=e.ErrorComponent,N=e.getCache;C=function(e){var t=e.Component,r=e.NotFoundComponent,a=e.loader,i=e.preProcessMarkerData,o=e.getCacheKey,u=e.LoaderComponent,s=e.ErrorComponent,d=(0,e.getCache)();return r=r||t,function(e){var l=e.marker,f=e.updateMarker,b=Object(n.useRef)({}),v=Object(n.useState)({}),m=Object(c.a)(v,2),h=m[0],j=h.loading,O=h.error,g=m[1],x=l.data,C=l.markerData,y=i(C),I=o(y);return b.current.loadData=y,b.current.updateMarker=f,b.current.cacheKey=I,Object(n.useEffect)((function(){if(x||null===x)return null;var e=d.getItem(I);if(e||null===e)return b.current.updateMarker({data:e}),g({}),null;var t=new p.a;return g({loading:!0}),a(b.current.loadData,t.signal).then((function(e){var t;e=null!==(t=e)&&void 0!==t?t:null,d.setItem(I,e),I===b.current.cacheKey&&(b.current.updateMarker({data:e}),g({}))})).catch((function(e){e.aborted||I===b.current.cacheKey&&g({error:e})})),function(){return t.abort()}}),[I,x]),j?Object(k.jsx)(u,{loadData:y}):O?Object(k.jsx)(s,{error:O}):null===x?Object(k.jsx)(r,{data:null,marker:l,updateMarker:f}):x?Object(k.jsx)(t,{data:x,marker:l,updateMarker:f}):null}}({Component:C,NotFoundComponent:I,loader:y,getCacheKey:T,preProcessMarkerData:M,LoaderComponent:S||R,ErrorComponent:w||D,getCache:N}),a=i?function(e){var t=e.ItemComponent,r=e.NoItemsComponent,a=void 0===r?function(){return"No matching entries found"}:r,i=e.ContainerComponent,o=void 0===i?function(e){var t=e.ResultListComponent,r=Object(l.a)(e,ve);return Object(k.jsx)(t,Object(d.a)({},r))}:i,u=e.onSelect,s=function(e){var r=e.results,i=e.marker,o=e.updateMarker,s=e.onHide,l=e.focusParent,f=e.focusImperativeRef,p=e.menuListId,b=e.menuButtonId,v=Object(n.useState)(null),m=Object(c.a)(v,2),h=m[0],j=m[1];Object(n.useImperativeHandle)(f,(function(){return{focus:function(e){var t=e.start,r=e.end,n=e.delta,a=e.index;j(t?0:r?-1:null!=n?function(e){return null==e?n>0?n-1:n:e+n}:a)}}}),[]);var O,g,x=function(e){var t,r=u({selectedItem:e,marker:i});o(Object(d.a)(Object(d.a)({data:e},r),{},{isLocked:null===(t=r.isLocked)||void 0===t||t})),setTimeout((function(){return s()}))},C=null==h?null:(O=h,g=r.length,O<0?g-1-(-O-1)%g:O%g),y=pe(C)!==C?C:null;return r.length?Object(k.jsx)("ul",{role:"menu",id:p,"aria-labelledby":b,className:"search-results-list",onKeyDown:function(e){if("ArrowDown"===e.key){var t=C+1;t<r.length?j(t):(j(null),l()),e.preventDefault()}else if("ArrowUp"===e.key){var n=C-1;n>=0?j(n):(j(null),l()),e.preventDefault()}else"ArrowLeft"===e.key?(j(null),s({start:!0}),e.preventDefault()):"ArrowRight"===e.key?(j(null),l(),e.preventDefault()):"Enter"===e.key&&r[C]&&(x(r[C]),e.preventDefault())},children:r.map((function(e,r){return Object(k.jsx)("li",{role:"none",children:Object(k.jsx)("a",{ref:y===r?function(e){(null===e||void 0===e?void 0:e.focus)&&e.focus()}:null,role:"menuitem",tabIndex:"-1",className:"search-results-list-item".concat(C===r?" search-results-list-item--focused":""),onClick:function(){return x(e)},children:Object(k.jsx)(t,{item:e})})},r)}))}):Object(k.jsx)(a,{marker:i})};return function(e){return Object(k.jsx)(o,Object(d.a)({ResultListComponent:s},e))}}({ItemComponent:i,NoItemsComponent:u,ContainerComponent:a,onSelect:o}):a;var H=N(),V=h||R,P=j||D;return function(e){var t,r=e.marker,i=e.focusParent,o=e.onHide,u=e.markersHandlers,d=e.focusImperativeRef,l=e.menuListId,f=e.menuButtonId,v=Object(n.useRef)({}),h=r.markerData,j=null!==(t=b(h))&&void 0!==t?t:null,O=Object(n.useState)({}),x=Object(c.a)(O,2),y=x[0],I=y.loading,E=y.error,M=y.results,L=x[1];v.current.isLocked=r.isLocked,v.current.onHide=o,v.current.searchData=j;var T=ue(null!=j?m(j):null,g);return Object(n.useEffect)((function(){if(v.current.isLocked)return L({}),null;if(v.current.cacheKey=T,null===T)return v.current.onHide(),null;var e=H.getItem(T);if(e)return L({results:e}),null;var t=new p.a;return L({loading:!0}),s(v.current.searchData,t.signal).then((function(e){v.current.isLocked||(H.setItem(T,e),v.current.cacheKey===T&&L({results:e}))})).catch((function(e){v.current.isLocked||e.aborted||v.current.cacheKey===T&&L({error:e})})),function(){return t.abort()}}),[T]),r.isLocked?Object(k.jsx)(C,{marker:r,focusParent:i,onHide:o,focusImperativeRef:d,menuListId:l,menuButtonId:f,updateMarker:function(e){u.updateMarker(r,e)}}):I?Object(k.jsx)(V,{loadData:j}):E?Object(k.jsx)(P,{error:E}):M?Object(k.jsx)(a,{results:M,marker:r,focusParent:i,onHide:o,focusImperativeRef:d,menuListId:l,menuButtonId:f,updateMarker:function(e){u.updateMarker(r,e)}}):null}},je=function(e){var t=e.tipsOptionsByType,r=e.LoaderComponent,a=e.ErrorComponent,i=e.debounceDuration,o=e.getCache,c={};for(var u in t)c[u]=he({tipOptions:t[u],LoaderComponent:r,ErrorComponent:a,debounceDuration:i,getCache:o});return function(e){var t=e.marker,r=e.focusParent,a=e.onHide,i=e.markersHandlers,o=e.focusImperativeRef,u=e.menuListId,s=e.menuButtonId,d=Object(n.useRef)({});d.current.onHide=a;var l=c[t.type];return Object(n.useEffect)((function(){l||d.current.onHide()}),[l]),l?Object(k.jsx)(l,{marker:t,focusParent:r,onHide:a,markersHandlers:i,focusImperativeRef:o,menuListId:u,menuButtonId:s}):null}},ke=function(){var e={};return{getItem:function(t){return e[t]},setItem:function(t,r){e[t]=r}}},Oe=function(e){var t=e.anchors,r=e.version,a=e.LoaderComponent,i=e.ErrorComponent,o=e.hideTipOnEscape,c=void 0===o||o,u=e.debounceDuration,s=void 0===u?300:u,f=e.getId,p=void 0===f?function(){return"".concat(Math.round(999999*Math.random()),"-").concat(Date.now())}:f,b=e.classNameGetters,v=e.getCache,m=e.backgroundColor,h=e.lineHeight;v=v?function(e){return function(){var t=e();return{getItem:function(e){try{return t.getItem(e)}catch(r){return void console.error("error getting cache item",r)}},setItem:function(e,r){try{t[e]=r}catch(n){console.error("error setting cache item",n)}}}}}(v):ke;var j={},O=[];return t.forEach((function(e){j[e.type]={search:e.searchOptions,details:e.detailsOptions},O.push({anchorChar:e.anchorChar,type:e.type,parts:e.parts})})),function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"textarea";return Object(n.forwardRef)((function(r,a){var i=r.id,o=Object(l.a)(r,me),c=Object(n.useRef)(i||e()).current;return Object(k.jsx)(t,Object(d.a)({ref:a,id:c},o))}))}}(p)(ie({hideOnEscape:c,TipComponent:je({tipsOptionsByType:j,LoaderComponent:a,ErrorComponent:i,debounceDuration:s,getCache:v})})(fe(de(Q({classNameGetters:b,defaultBackgroundColor:m,defaultLineHeight:h})($(D({markerParserOptions:{version:r,anchors:O}})(x(te(be(ce))))))))))},ge=(r(25),["ResultListComponent"]),xe=[{id:"mo",name:"Mohammad Amin",imageUrl:"./img/img (2).jpg"},{id:"lara",name:"Lara Croft",imageUrl:"./img/img (1).png"},{id:"john",name:"John Doe",imageUrl:"./img/img (1).jpg"},{id:"jane",name:"Jane Doe",imageUrl:"./img/img (2).png"},{id:"bilz",name:"Bilal Harb",imageUrl:"./img/img (3).jpg"},{id:"paul",name:"Paul Pogba",imageUrl:"./img/img (3).png"},{id:"nitin",name:"Nitin Picktach",imageUrl:"./img/img (4).png"}],Ce=[{id:"spoon",name:"Spoon",details:"To eat soup"},{id:"fork",name:"Fork",details:"To eat fries"},{id:"spork",name:"Spork",details:"Multi purpose"},{id:"knife",name:"Knife",details:"To cut food"},{id:"plate",name:"Plate",details:"Food container"},{id:"pencil",name:"Pencil",imageUrl:"/img/img (3).jpg",details:"To write down notes"},{id:"Pen",name:"Pen",details:"To write in exams"}],ye=Oe({version:0,anchors:[{anchorChar:"@",type:"person",parts:[{key:"name"}],searchOptions:{ResultItemComponent:function(e){var t=e.item;return Object(k.jsxs)("div",{className:"person-item",children:[Object(k.jsx)("img",{src:t.imageUrl,alt:"person"}),"\xa0",t.name]})},NoResultItemComponent:function(){return"No matching people found"},resultItemComponentOnSelect:function(e){var t=e.selectedItem;return{textValue:t.name,markerData:{id:t.id}}},loader:function(e,t){return function(e,t){return new Promise((function(r,n){var a=setTimeout((function(){r(xe.filter((function(t){var r;return null===(r=t.name)||void 0===r?void 0:r.trim().toLocaleLowerCase().includes(null===e||void 0===e?void 0:e.trim().toLowerCase())})))}),1e3+2e3*Math.random());t.addEventListener("abort",(function(){var e=new Error("aborted");e.aborted=!0,clearTimeout(a),n(e)}))}))}(e.name,t)},getCacheKey:function(e){var t=e.name;return(null===t||void 0===t?void 0:t.trim().toLowerCase())||null},debounceDuration:350},detailsOptions:{Component:function(e){var t=e.data;return Object(k.jsx)("div",{className:"person-details-container",children:Object(k.jsx)("img",{src:t.imageUrl,alt:"person"})})},NotFoundComponent:function(e){var t=e.updateMarker,r=Object(n.useState)(4),a=Object(c.a)(r,2),i=a[0],o=a[1],u=Object(n.useRef)();u.current=t,Object(n.useEffect)((function(){var e=setInterval((function(){o((function(e){return e-1}))}),1e3);return function(){return clearInterval(e)}}),[]);var s=0===i;return Object(n.useEffect)((function(){s&&u.current(null)}),[s]),Object(k.jsxs)("b",{children:["Person not found! will delete in ",i]})},loader:function(e,t){return function(e,t){return new Promise((function(r,n){var a=setTimeout((function(){r(xe.find((function(t){return t.id===e})))}),500+1e3*Math.random());t.addEventListener("abort",(function(){var e=new Error("aborted");e.aborted=!0,clearTimeout(a),n(e)}))}))}(e.id,t)},getCacheKey:function(e){return e.id}}},{anchorChar:"#",type:"thing",parts:[{key:"name"}],searchOptions:{ResultsComponent:function(e){var t=e.ResultListComponent,r=Object(l.a)(e,ge);return Object(k.jsxs)("p",{children:[Object(k.jsx)("h5",{children:"Found the following things:"}),Object(k.jsx)(t,Object(d.a)({},r))]})},ResultItemComponent:function(e){var t=e.item;return Object(k.jsx)("div",{className:"thing-item",children:t.name})},resultItemComponentOnSelect:function(e){var t=e.selectedItem;return{textValue:t.name,markerData:{id:t.id}}},loader:function(e,t){return function(e,t){return new Promise((function(r,n){var a=setTimeout((function(){r(Ce.filter((function(t){var r;return null===(r=t.name)||void 0===r?void 0:r.trim().toLocaleLowerCase().includes(null===e||void 0===e?void 0:e.trim().toLowerCase())})))}),1e3+2e3*Math.random());t.addEventListener("abort",(function(){var e=new Error("aborted");e.aborted=!0,clearTimeout(a),n(e)}))}))}(e.name,t)},getCacheKey:function(e){var t=e.name;return(null===t||void 0===t?void 0:t.trim().toLowerCase())||null},debounceDuration:350},detailsOptions:{Component:function(e){var t=e.data;return Object(k.jsxs)("div",{children:[Object(k.jsx)("h5",{children:t.name}),Object(k.jsx)("p",{children:t.details})]})},loader:function(e,t){return function(e,t){return new Promise((function(r,n){var a=setTimeout((function(){r(Ce.find((function(t){return t.id===e})))}),500+1e3*Math.random());t.addEventListener("abort",(function(){var e=new Error("aborted");e.aborted=!0,clearTimeout(a),n(e)}))}))}(e.id,t)},getCacheKey:function(e){return e.id}}}],ErrorComponent:function(e){return e.error.message},LoaderComponent:function(){return Object(k.jsx)("h5",{children:Object(k.jsx)("b",{children:"Loading..."})})},hideTipOnEscape:!0}),Ie=xe.map((function(e){return e.name})).join(", "),Ee=Ce.map((function(e){return e.name})).join(", "),Me=function(){var e=Object(n.useState)([]),t=Object(c.a)(e,2),r=t[0],a=t[1],i=Object(n.useState)([]),o=Object(c.a)(i,2),u=o[0],d=o[1];return Object(k.jsxs)("div",{className:s.a.container,children:[Object(k.jsxs)("ul",{children:[Object(k.jsxs)("li",{children:["use @ to trigger person marker start. Available people to search:",Object(k.jsx)("ul",{children:Object(k.jsx)("li",{children:Ie})}),"people marker color is the default gray color"]}),Object(k.jsxs)("li",{children:["use # to trigger things marker start. Available things to search:",Object(k.jsx)("ul",{children:Object(k.jsx)("li",{children:Ee})}),"things marker color is a custom orange color"]})]}),Object(k.jsx)(ye,{className:"smart-text-area",initValue:"Mohammad Amin is the author of this component\nJohn Doe is a generic male name\nJane Doe is a generic female name\nasdfg is a name not in our database\n\nFork, Knife and Spoon are kitchen utensils we eat with",initMarkers:[{start:0,end:13,type:"person",markerData:{id:"mo"}},{start:46,end:54,type:"person",markerData:{id:"john"}},{start:78,end:86,type:"person",markerData:{id:"jane"}},{start:112,end:117,type:"person",markerData:{id:"asdfg"}},{start:149,end:153,type:"thing",markerData:{id:"fork"}},{start:155,end:160,type:"thing",markerData:{id:"knife"}},{start:165,end:170,type:"thing",markerData:{id:"spoon"}}],onMarkersChange:function(e){a(e.markers)},onInEditMarkerChange:function(e){d(e.inEditMarker)}}),Object(k.jsxs)("p",{children:[Object(k.jsx)("h5",{children:"Markers:"}),Object(k.jsx)("pre",{children:r.map((function(e){return Object(k.jsx)("div",{className:e.uuid===(null===u||void 0===u?void 0:u.uuid)?s.a.inEditMarker:"",children:JSON.stringify(e,null,3)})}))})]})]})};o.a.render(Object(k.jsx)(Me,{}),document.getElementById("root"))}},[[26,1,2]]]);
//# sourceMappingURL=main.f04d8d02.chunk.js.map