(this["webpackJsonpsmart-textarea-maa"]=this["webpackJsonpsmart-textarea-maa"]||[]).push([[0],{15:function(e,t,r){},22:function(e,t,r){},29:function(e,t,r){},30:function(e,t,r){"use strict";r.r(t);var n=r(2),a=r.n(n),i=r(14),o=r.n(i),c=r(3),s=r(4),u=r(15),d=r.n(u),l=r(0),f=(r(22),r(6)),p=r(16),m=r(5),v=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=function(e){for(var r=0;r<t.length;r++){var n=t[r];"function"===typeof n?n(e):n&&(n.current=e)}};return n},b=function(e,t,r){var a=Object(n.useRef)({}),i=Object(n.useRef)({}),o=function(){var t,r,n=Object(l.a)(Object(l.a)({},a.current.children),a.current.current);i.current=n,r=n,"function"===typeof(t=e)?t(r):t&&(t.current=r)};return Object(n.useImperativeHandle)((function(e){a.current.current=e,o()}),t,r),[function(e){a.current.children=e,o()},i,a]},h=r(1),k=["onSelectionChange","value","markers","onInEditMarkerChange"],j=function(e){var t=function(e){return e.midSelectedMarkerIndex>=0?e.midSelectedMarkerIndex:e.endSelectedMarkerIndex>=0?e.endSelectedMarkerIndex:e.markerWithEndTouchedIndex>=0?e.markerWithEndTouchedIndex:-1}(e);return e.inEditMarkerIndex=t,e},g=function(e){for(var t,r,n=e.partsOrMarkers,a=e.selectionStart,i=e.selectionEnd,o={startIndex:-1,endIndex:-1},c=-1,s=-1,u=-1,d=-1,l=-1,f=0,p=function(){var e,a;return{selectedRange:o,startSelectedIndex:c,endSelectedIndex:s,midSelectedIndex:u,startTouchedIndex:d,endTouchedIndex:l,prevIndex:t,nextIndex:(null!==(e=r)&&void 0!==e?e:-1)>=n.length?-1:null!==(a=r)&&void 0!==a?a:-1}};f<n.length&&n[f].end<a;f++);t=f-1;var m=n[f];if(!m)return p();if(m.end===a&&(l=t=f,f++,!(m=n[f])))return p();if(m.start>=i)return r=f,m.start===i&&(d=f),p();var v=a<=m.start&&m.start<i,b=a<m.end&&m.end<=i,h=v&&b;if(!v&&!b)return u=f,r=f+1,p();if(!h){if(v)return c=f,r=f+1,p();if(s=f,f++,!(m=n[f]))return p();if(v=a<=m.start&&m.start<i,b=a<m.end&&m.end<=i,!(h=v&&b))return v?(r=f+1,c=f):(r=f,m.start===i&&(d=f)),p()}for(o.startIndex=f,f++;f<n.length;f++)if(v=a<=(m=n[f]).start&&m.start<i,b=a<m.end&&m.end<=i,!(h=v&&b)){v?(r=f+1,c=f):(r=f,m.start===i&&(d=f));break}return o.endIndex=f,p()},O=function(e){var t=e.markers,r=e.selectionStart,n=e.selectionEnd,a=g({partsOrMarkers:t,selectionStart:r,selectionEnd:n}),i=a.selectedRange,o=a.startSelectedIndex,c=a.endSelectedIndex,s=a.midSelectedIndex,u=a.startTouchedIndex,d=a.endTouchedIndex,l=a.prevIndex,f=a.nextIndex;return j({markers:t,selectedMarkersRange:i,startSelectedMarkerIndex:o,endSelectedMarkerIndex:c,midSelectedMarkerIndex:s,markerWithStartTouchedIndex:u,markerWithEndTouchedIndex:d,prevMarkerIndex:l,nextMarkerIndex:f})},x=function(e){var t=e.marker,r=e.selectionStart,n=e.selectionEnd,a=t.parts,i=g({partsOrMarkers:a,selectionStart:r,selectionEnd:n}),o=i.selectedRange,c=i.startSelectedIndex,s=i.endSelectedIndex,u=i.midSelectedIndex,d=i.startTouchedIndex,l=i.endTouchedIndex,f=i.prevIndex,p=i.nextIndex,m=a[0].start-1,v=r<=m&&n>m;return{markerUuid:t.uuid,parts:t.parts,selectedPartRange:o,startSelectedPartIndex:c,endSelectedPartIndex:s,midSelectedPartIndex:u,partWithStartTouchedIndex:d,partWithEndTouchedIndex:l,prevPartIndex:f,nextPartIndex:p,anchorSelected:v}},y=function(e){var t=e.marker,r=e.selectionStart,n=e.selectionEnd,a=e.isSingleSelection,i=e.startCursorMoved,o=e.endCursorMoved,c=x({marker:t,selectionStart:r,selectionEnd:n}),s=c.midSelectedPartIndex,u=c.endSelectedPartIndex,d=c.startSelectedPartIndex,l=c.selectedPartRange,f=t.parts,p=t.lastResolvedPartIndex;if(s>=0){var m=f[s];if(m.isLocked){if(a)return i<0?{selectionStart:m.start,selectionEnd:m.start}:{selectionStart:m.end,selectionEnd:m.end};var v=f[p];return{selectionStart:m.start,selectionEnd:v.end}}}if(u>=0){var b=f[u];if(b.isLocked){var h=f[p];return{selectionStart:i>0?b.end:b.start,selectionEnd:Math.max(n,h.end)}}}if(d>=0&&f[d].isLocked){var k=f[p];return{selectionStart:Math.min(r,f[0].start),selectionEnd:o<0?f[0].start:k.end}}if(l.endIndex>=0&&l.endIndex<p+1){var j=f[p];return{selectionStart:r,selectionEnd:Math.max(n,j.end)}}return{selectionStart:r,selectionEnd:n}},I=function(e){var t=e.markers,r=e.selectionStart,n=e.selectionEnd,a=e.isSingleSelection,i=e.startCursorMoved,o=e.endCursorMoved,c=O({markers:t,selectionStart:r,selectionEnd:n}),s=c.midSelectedMarkerIndex,u=c.endSelectedMarkerIndex,d=c.startSelectedMarkerIndex;if(s>=0){var l=t[s];if(l.isLocked){if(a){var f=i<0?l.start:l.end;return{selectionStart:f,selectionEnd:f}}return{selectionStart:l.start,selectionEnd:l.end}}return y({marker:l,selectionStart:r,selectionEnd:n,isSingleSelection:a,startCursorMoved:i,endCursorMoved:o})}if(u>=0){var p=t[u];if(p.isLocked)r=i<0?p.start:p.end;else{var m=y({marker:p,selectionStart:r,selectionEnd:n,isSingleSelection:a,startCursorMoved:i,endCursorMoved:o});r=m.selectionStart,n=m.selectionEnd}}if(d>=0){var v=t[d];if(v.isLocked)n=o>0?v.end:v.start;else{var b=y({marker:v,selectionStart:r,selectionEnd:n,isSingleSelection:a,startCursorMoved:i,endCursorMoved:o});r=b.selectionStart,n=b.selectionEnd}}return{selectionStart:r,selectionEnd:n}},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"textarea";return Object(n.forwardRef)((function(t,r){var a=t.onSelectionChange,i=t.value,o=t.markers,s=t.onInEditMarkerChange,u=Object(c.a)(t,k),d=Object(n.useRef)({}),f=Object(n.useRef)();return Object(h.jsx)(e,Object(l.a)(Object(l.a)({ref:v(r,f)},u),{},{value:i,markers:o,onSelectionChange:function(e){var t=e.target,r=t.selectionStart,n=t.selectionEnd,c=r===n,u=d.current.selection,f=u&&(null===u||void 0===u?void 0:u.selectionStart)!==r?r-u.selectionStart:0,p=u&&(null===u||void 0===u?void 0:u.selectionEnd)!==n?n-u.selectionEnd:0,m=I({markers:o,selectionStart:r,selectionEnd:n,isSingleSelection:c,startCursorMoved:f,endCursorMoved:p}),v=m.selectionStart,b=m.selectionEnd;n!==b&&(t.selectionEnd=b),r!==v&&(t.selectionStart=v);var h=j(Object(l.a)({markers:o,selectionStart:v,selectionEnd:b},O({markers:o,selectionStart:v,selectionEnd:b})));d.current.selection=h,s&&s({target:t,value:i,markers:o,inEditMarkerIndex:h.inEditMarkerIndex,oldInEditMarkerIndex:null===u||void 0===u?void 0:u.inEditMarkerIndex}),a&&a(Object(l.a)(Object(l.a)({},e),h))}}))}))},S=function(e){var t=e.marker,r=e.selectionStart,n=e.selectionEnd,a=x({marker:t,selectionStart:r,selectionEnd:n}),i=a.midSelectedPartIndex,o=a.endSelectedPartIndex,c=a.startSelectedPartIndex,s=a.selectedPartRange,u=a.anchorSelected,d=t.parts,l=t.lastResolvedPartIndex;if(i>=0){var f=d[i];if(f.isLocked){var p=d[l];return{block:!0,selectionStart:f.start,selectionEnd:p.end}}}if(o>=0){var m=d[o];if(m.isLocked){var v=d[l];return{block:!0,selectionStart:m.start,selectionEnd:Math.max(n,v.end)}}}if(s.endIndex>=0&&s.endIndex<l+1){var b=d[l];return{block:!0,selectionStart:r,selectionEnd:Math.max(n,b.end)}}if(!u&&c>=0&&d[c].isLocked)return{block:!0,selectionStart:r,selectionEnd:d[l].end};return{block:!1}},E=function(e){var t=e.markers,r=e.midSelectedMarkerIndex,n=e.endSelectedMarkerIndex,a=e.startSelectedMarkerIndex,i=e.selectionStart,o=e.selectionEnd,c=t[r],s=t[n],u=t[a];if(c)return c.isLocked?{block:!0,selectionStart:c.start,selectionEnd:c.end}:S({marker:c,selectionStart:i,selectionEnd:o});var d=!1;if(s)if(s.isLocked)d=!0,i=s.start,o=s.end;else{var l=S({marker:s,selectionStart:i,selectionEnd:o});l.block&&(d=!0,i=l.selectionStart,o=l.selectionEnd)}if(u)if(u.isLocked)d=!0,i=u.start,o=u.end;else{var f=S({marker:u,selectionStart:i,selectionEnd:o});f.block&&(d=!0,i=f.selectionStart,o=f.selectionEnd)}return d?{block:!0,selectionStart:i,selectionEnd:o}:{block:!1}},T=["initValue","initMarkers","onInput","onChange","onMarkersChange","disabled","imperativeRef"],L=!0,w={"\r":L,"\n":L},R=Object(l.a)({" ":L,"\t":L,"\v":L,"\0":L},w),M=function(e){var t=e.uuid,r=e.version,n=e.anchor,a=e.type,i=e.start,o=e.end,c=e.partsConfig,s=e.parts,u=e.partsText,d=e.partsIds,l=void 0===d?{}:d,f=e.partsData,p=void 0===f?{}:f,m=e.lastResolvedPartIndex,v=void 0===m?-1:m,b=e.isLocked,h=void 0!==b&&b;return{uuid:null!==t&&void 0!==t?t:"".concat(Math.round(999999*Math.random()),"-").concat(Date.now()),version:r,anchor:n,type:a,start:i,end:o,partsConfig:c,parts:s,partsText:u,partsIds:l,partsData:p,lastResolvedPartIndex:v,isLocked:h}},D=function(e,t){for(var r,n=0,a=null===(r=t.considerFirst)||void 0===r||r,i=t.anchors,o=[];n<e.length;){for(var c=void 0;n<e.length;){if((0===n&&a||R[e[n-1]])&&i[e[n]]){c=i[e[n]];break}n++}if(!c)break;var s=n;n=s+1;for(var u={},d=[],l=c.parts,f=0;f<l.length;f++){var p=n,m="",v=l[f],b=v.key,h=v.startChar,k=v.endChars;if(h){if(e[n]!==h)break;m=h,n++}for(var j=n;n<e.length&&!k[e[n]];)n++;var g=n;u[b]=e.substring(j,g);var O=1===k[e[n]],x=O?e[n]:"";O&&n++;var y=n;if(d.push({key:b,start:p,end:y,startChar:m,endChar:x}),n>=e.length&&!O)break;if(k[e[n]]===L)break}o.push({anchor:c.anchorChar,type:c.type,version:t.version,start:s,end:n,partsConfig:l,parts:d,partsText:u})}return o},H=function(e,t){return function(r,n,a){return e(r,Object(l.a)(Object(l.a)({},t),{},{considerFirst:a})).map((function(e){return M(Object(l.a)(Object(l.a)({isLocked:!1,partsIds:{},partsData:{},lastResolvedPartIndex:-1},e),{},{parts:e.parts.map((function(e){return Object(l.a)(Object(l.a)({isLocked:!1},e),{},{start:e.start+n,end:e.end+n})})),start:e.start+n,end:e.end+n}))}))}},P=function(e){var t=e.markers,r=e.prevValue,n=e.selectionStart,a=e.selectionEnd,i=e.insertedText,o=e.prevMarkerIndex,c=e.midSelectedMarkerIndex,s=e.markerWithEndTouchedIndex,u=e.endSelectedMarkerIndex,d=e.nextMarkerIndex,f=e.markerParser,v=-1,b=[];if(c>=0){var h=t[c];if(h.isLocked)n=a=h.end,b.push.apply(b,Object(m.a)(t.slice(0,c+1)));else{v=c;var k=K({marker:h,selectionStart:n,selectionEnd:a});n=k.selectionStart,a=k.selectionEnd,b.push.apply(b,Object(m.a)(t.slice(0,c))),b.push(Object(l.a)(Object(l.a)({},h),{},{end:h.end+i.length-(a-n)}))}}else{if(s>=0){var j=t[s];b.push.apply(b,Object(m.a)(t.slice(0,s))),j.isLocked?b.push(j):(v=s,b.push(Object(l.a)(Object(l.a)({},j),{},{end:j.end+i.length})))}else if(u>=0){var g=t[u];if(b.push.apply(b,Object(m.a)(t.slice(0,u))),g.isLocked)n=g.end,b.push(g);else{v=u;var O=K({marker:g,selectionStart:n,selectionEnd:a});n=O.selectionStart,a=O.selectionEnd,b.push(Object(l.a)(Object(l.a)({},g),{},{end:n+i.length}))}}else o>=0&&b.push.apply(b,Object(m.a)(t.slice(0,o+1)));var x=i.length-(a-n);if(d>=0){var y=t.slice(d).map((function(e){var t;return Object(l.a)(Object(l.a)({},e),{},{parts:null===(t=e.parts)||void 0===t?void 0:t.map((function(e){return Object(l.a)(Object(l.a)({},e),{},{start:e.start+x,end:e.end+x})})),start:e.start+x,end:e.end+x})}));d=b.length,b.push.apply(b,Object(m.a)(y)),d=d>=b.length?-1:d}}var I=r.substring(0,n)+i+r.substring(a),C=b[v];if(C){for(var S,E,T=C.start,L=C.end,w=null!==(S=null===(E=b[d])||void 0===E?void 0:E.start)&&void 0!==S?S:I.length;L<w&&!R[I[L]];L++);for(var M=f(I.substring(T,L),T),D=Object(p.a)(M),H=D[0],P=D.slice(1),N=-1,A={},V={},F=[],B=C.parts,U=C.partsIds,W=C.partsData,z=H.parts,J=0;J<z.length;J++){var Z=B[J],q=z[J],G=q.key,X=Boolean((null===Z||void 0===Z?void 0:Z.isLocked)&&q.end!==q.start&&r.substring(Z.start,Z.end)===I.substring(q.start,q.end));F.push(Object(l.a)(Object(l.a)({},q),{},{isLocked:X})),X&&(N=J,A[G]=U[G],V[G]=W[G])}var Y=Object(l.a)(Object(l.a)({},H),{},{lastResolvedPartIndex:N,uuid:C.uuid,partsIds:A,partsData:V,parts:F});b.splice.apply(b,[v,1,Y].concat(Object(m.a)(P)))}else{for(var Q,$,_,ee,te=n,re=n+i.length,ne=null!==(Q=null===($=b[o])||void 0===$?void 0:$.end)&&void 0!==Q?Q:0,ae=Boolean(ne===te||R[I[te-1]]),ie=null!==(_=null===(ee=b[d])||void 0===ee?void 0:ee.start)&&void 0!==_?_:I.length;re<ie&&!R[I[re]];re++);var oe=f(I.substring(te,re),te,ae);b.splice.apply(b,[o+1,0].concat(Object(m.a)(oe)))}return{newValue:I,newMarkers:b,selectionStart:n,selectionEnd:a}},K=function(e){var t=e.marker,r=e.selectionStart,n=e.selectionEnd,a=t.lastResolvedPartIndex,i=t.parts,o=x({marker:t,selectionStart:r,selectionEnd:n}),c=o.midSelectedPartIndex,s=o.endSelectedPartIndex,u=o.startSelectedPartIndex,d=o.selectedPartRange;if(c>=0){if(i[c].isLocked)r=n=i[a].end;return{selectionStart:r,selectionEnd:n}}if(s>=0){if(i[s].isLocked){var l=i[a];r=l.end,n=Math.max(n,l.end)}return{selectionStart:r,selectionEnd:n}}if(u>=0){if(i[u].isLocked){var f=i[a];r=f.end,n=Math.max(n,f.end)}return{selectionStart:r,selectionEnd:n}}if(d.endIndex>=0&&d.endIndex<a+1){var p=i[a];return{selectionStart:r=p.end,selectionEnd:n=Math.max(n,p.end)}}return{selectionStart:r,selectionEnd:n}},N=function(e){var t={},r={};return e.anchors.forEach((function(e){var n=e.parts.map((function(e,t,r){var n,a=e.startChar,i=e.endChar;return{key:e.key,startChar:a||"",endChar:i||"",endChars:Object(l.a)(Object(l.a)(Object(l.a)({},(null===(n=r[t+1])||void 0===n?void 0:n.startChar)?Object(f.a)({},r[t+1].startChar,2):null),i?Object(f.a)({},i,1):null),w)}})),a=Object(l.a)(Object(l.a)({},e),{},{parts:n});r[e.type]=a,t[e.anchorChar]=a})),Object(l.a)(Object(l.a)({},e),{},{anchors:t,types:r})},A=function(e,t,r,n){return(e?r.startChar:t.startChar)+n+(e?r.endChar:t.endChar)},V=function(e,t,r,n){return(e?r.startChar:t.startChar).length+n.length+(e?r.endChar:t.endChar).length-(t.end-t.start)},F=function(e,t){for(var r,n=t.types[e.type]||t.anchors[e.anchor],a=n.parts,i=0;i<a.length;i++)e.partsIds[a[i].key]&&(r=i);var o=r===a.length-1,c=o?void 0:(e.parts||[]).map((function(e,t){return Object(l.a)(Object(l.a)({},e),{},{isLocked:t<=r})})),s=o?void 0:e.partsText;return M(Object(l.a)(Object(l.a)({},e),{},{type:n.type,anchor:n.anchor,parts:c,partsText:s,partsConfig:a,isLocked:o,lastResolvedPartIndex:r}))},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.markerParserOptions;t=N(t);var r=H(D,t);return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"textarea";return Object(n.forwardRef)((function(a,i){var o,u=a.initValue,d=a.initMarkers,p=a.onInput,k=a.onChange,j=a.onMarkersChange,g=a.disabled,x=a.imperativeRef,y=Object(c.a)(a,T),I=Object(n.useRef)();I.current=I.current||{value:null!==u&&void 0!==u?u:"",markers:null!==(o=null===d||void 0===d?void 0:d.filter((function(e){var r=e.anchor,n=e.type;return t.types[n]||t.anchors[r]})).map((function(e){return F(e,t)})))&&void 0!==o?o:[]},I.current.onMarkersChange=j,I.current.disabled=g;var C=Object(n.useRef)();(y.value||y.markers)&&(console.warn('Do not use props "value" and "markers". Use "initValue" and "initMarkers" instead'),delete y.markers,delete y.value);var S=Object(n.useState)(I.current.value),L=Object(s.a)(S,2),w=L[0],R=L[1],M=Object(n.useState)(I.current.markers),D=Object(s.a)(M,2),H=D[0],K=D[1],N=function(e){I.current.value=e,R(e)},B=function(e){I.current.markers=e,K(e)},U=b(x,(function(){return{deleteMarker:function(e,t){var r=I.current.markers,n=I.current.value,a=r.findIndex((function(t){return t.uuid===e.uuid}));if(!(a<0)){var i=e=r[a],o=i.start,c=i.end-o,s=n.substring(0,e.start)+n.substring(e.end),u=[].concat(Object(m.a)(r.slice(0,a)),Object(m.a)(r.slice(a+1).map((function(e){var t;return Object(l.a)(Object(l.a)({},e),{},{start:e.start-c,end:e.end-c,parts:null===(t=e.parts)||void 0===t?void 0:t.map((function(e){return Object(l.a)(Object(l.a)({},e),{},{start:e.start-c,end:e.end-c})}))})}))));if(N(s),B(u),t){var d=C.current;C.current.value=s,d.selectionStart=d.selectionEnd=e.start}j&&j({target:C.current,init:!1,value:s,oldValue:n,markers:u,oldMarkers:r}),k&&k({target:C.current,value:s,markers:u})}},unmarkMarker:function(e,t){var r=I.current.markers,n=I.current.value,a=r.findIndex((function(t){return t.uuid===e.uuid}));if(!(a<0)){e=r[a];var i=[].concat(Object(m.a)(r.slice(0,a)),Object(m.a)(r.slice(a+1)));if(B(i),t){var o=C.current;o.selectionStart=o.selectionEnd=e.end}j&&j({target:C.current,init:!1,value:n,oldValue:n,markers:i,oldMarkers:r}),k&&k({target:C.current,value:n,markers:i})}},updateMarkerPart:function(e,t){var r=e.marker,n=e.partKey;return function(e,t){var r=e.marker,n=e.partKey,a=r.uuid||r,i=I.current.markers,o=I.current.value,c=i.findIndex((function(e){return e.uuid===a}));if(c<0)return!1;var s=(r=i[c]).partsConfig.findIndex((function(e){return e.key===n}));if(s<0)return!1;var u=r.partsConfig,d=u[s],p=function(e){var t;if(!e)return r;var a=e.text,p=e.cursor,v=e.data,b=e.id,h=r,g=h.partsIds,O=h.partsData,x=h.parts,y=h.partsText,I=null===(t=x)||void 0===t?void 0:t[s],S=Boolean(b,g[n]),E=S?Math.max(s,r.lastResolvedPartIndex):r.lastResolvedPartIndex,T=s===u.length-1,L=r.isLocked||S&&T,w=x&&s===x.length-1,R=T?null:u[s+1],M=L&&e.appendText||"",D=null!=a,H=D?L?a.length+M.length-(r.end-r.start):V(S,I,d,a):0;if(b&&(g=Object(l.a)(Object(l.a)({},g),{},Object(f.a)({},n,b))),(v||null===v)&&(O=Object(l.a)(Object(l.a)({},O),{},Object(f.a)({},n,v))),L)x=void 0;else if(S!==I.isLocked||D){var P=x.slice(0,s),K=Object(l.a)(Object(l.a)({},x[s]),{},{isLocked:S,end:x[s].end+H},S?{startChar:d.startChar,endChar:d.endChar}:null);P.push(K),w?T||P.push({start:K.end,end:K.end,key:R.key,endChar:"",startChar:""}):H?P.push.apply(P,Object(m.a)(x.slice(s+1).map((function(e){return Object(l.a)(Object(l.a)({},e),{},{start:e.start+H,end:e.end+H})})))):P.push.apply(P,Object(m.a)(x.slice(s+1))),x=P}L?y=void 0:D&&(y=Object(l.a)(Object(l.a)({},y),{},Object(f.a)({},n,a)),w&&!T&&(y[R.key]=""));var F=Object(m.a)(i.slice(0,c)),U=Object(l.a)(Object(l.a)({},r),{},{end:r.end+H,parts:x,partsIds:g,partsData:O,partsText:y,lastResolvedPartIndex:E,isLocked:L});F.push(U),H?F.push.apply(F,Object(m.a)(i.slice(c+1).map((function(e){var t;return Object(l.a)(Object(l.a)({},e),{},{parts:null===(t=e.parts)||void 0===t?void 0:t.map((function(e){return Object(l.a)(Object(l.a)({},e),{},{start:e.start+H,end:e.end+H})})),start:e.start+H,end:e.end+H})})))):F.push.apply(F,Object(m.a)(i.slice(c+1)));var W=o;if(D&&(W=[o.substring(0,L?r.start:I.start),L?a+M:A(S,I,d,a),o.substring(L?r.end:I.end)].join(""),N(W)),B(F),p){var z,J=C.current;C.current.value=W;var Z=F[c],q=null===(z=Z.parts)||void 0===z?void 0:z[s];"start"===p?J.selectionStart=J.selectionEnd=L?Z.start:q.start:"end"===p&&(J.selectionStart=J.selectionEnd=L?Z.end+M.length:q.end)}return j&&j({target:C.current,init:!1,value:W,oldValue:o,markers:F,oldMarkers:i}),k&&k({target:C.current,value:W,markers:F}),U};return p("function"===typeof t?t({marker:r,partConfig:d,partIndex:s}):t)}({marker:r,partKey:n},(function(e){var r,a=e.marker,i=e.partConfig,o=e.partIndex;return"function"===typeof t&&(t=t({marker:a,partKey:n,partConfig:i,partIndex:o})),I.current.disabled&&t?{data:t.data}:t?Object(l.a)({data:void 0===t.data?a.partsData[n]:t.data,id:null!==(r=t.id)&&void 0!==r?r:a.partsIds[n]},t):t}))}}}),[]),W=Object(s.a)(U,1)[0];return Object(n.useEffect)((function(){var e=C.current,t=I.current.onMarkersChange;t&&t({target:e,init:!0,value:I.current.value,oldValue:"",markers:I.current.markers,oldMarkers:[]})}),[]),Object(h.jsx)(e,Object(l.a)(Object(l.a)({},y),{},{ref:v(i,C),imperativeRef:W,disabled:g,value:w,markers:H,onInput:function(e){var t=e.target,n=t.value,a=w;if(a===n)return!0;var i,o=t.selectionEnd,c=a.length-(n.length-o),s=Math.min(c,o);for(i=0;i<s&&a[i]===n[i];i++);var u=O({markers:H,selectionStart:i,selectionEnd:c}),d=E(Object(l.a)(Object(l.a)({},u),{},{selectionStart:i,selectionEnd:c}));if(I.current.blockTimer&&(clearTimeout(I.current.blockTimer),I.current.blockTimer=null),d.block)return t.selectionStart=d.selectionStart,t.selectionEnd=d.selectionEnd,I.current.blockTimer=setTimeout((function(){I.current.blockTimer=null;try{t.selectionStart=d.selectionStart,t.selectionEnd=d.selectionEnd}catch(e){}})),e.preventDefault(),!1;var f=n.substring(i,o),m=u,v=m.prevMarkerIndex,b=m.midSelectedMarkerIndex,h=m.markerWithEndTouchedIndex,k=m.endSelectedMarkerIndex,g=m.nextMarkerIndex,x=P({markers:H,prevValue:a,selectionStart:i,selectionEnd:c,insertedText:f,prevMarkerIndex:v,midSelectedMarkerIndex:b,markerWithEndTouchedIndex:h,endSelectedMarkerIndex:k,nextMarkerIndex:g,markerParser:r}),y=x.newValue,C=x.newMarkers,S=x.selectionEnd;N(y),B(C);var T=y!==n?S:o;return t.value=y,t.selectionEnd=T,t.selectionStart=T,u=Object(l.a)({selectionStart:T,selectionEnd:T},O({markers:C,selectionStart:T,selectionEnd:T})),j&&j({target:t,init:!1,value:y,oldValue:w,markers:C,oldMarkers:H}),p&&p({target:t,value:y,markers:C}),!0},onChange:function(e){k&&k({target:e.target,value:I.current.value,markers:I.current.markers})}}))}))}},U=r(17),W=r.n(U),z=["labelLine"],J=["anchorProps","TipComponent"],Z=["backgroundColor","InnerComponent","TipComponent","visibleTipsData","updateTipVisibility","updateTipFocusFunction","onResize","onScroll","onMarkersChange","onInEditMarkerChange","imperativeRef","id"],q=["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing","tabSize","MozTabSize"];function G(e,t,r){var n=r&&r.debug||!1;if(n){var a=document.querySelector("#input-textarea-caret-position-mirror-div");a&&a.parentNode.removeChild(a)}var i=document.createElement("div");i.id="input-textarea-caret-position-mirror-div",document.body.appendChild(i);var o=i.style,c=window.getComputedStyle?window.getComputedStyle(e):e.currentStyle,s="INPUT"===e.nodeName;o.whiteSpace="pre-wrap",s||(o.wordWrap="break-word"),o.position="absolute",n||(o.visibility="hidden"),q.forEach((function(e){if(s&&"lineHeight"===e)if("border-box"===c.boxSizing){var t=parseInt(c.height,10),r=parseInt(c.paddingTop,10)+parseInt(c.paddingBottom,10)+parseInt(c.borderTopWidth,10)+parseInt(c.borderBottomWidth,10),n=r+parseInt(c.lineHeight,10);o.lineHeight=t>n?"".concat(t-r,"px"):t===n?c.lineHeight:0}else o.lineHeight=c.height;else o[e]=c[e]})),!s&&e.clientHeight<e.scrollHeight?o.overflowY="scroll":o.overflowY="hidden",!s&&e.clientWidth<e.scrollWidth?o.overflowX="scroll":o.overflowX="hidden";for(var u=e.value,d=[u.substring(0,t[0])],l=u.length,f=0;f<t.length;f++){if(t[f]>=l){d.push(null);break}s?(d.push(u[t[f]].replace(/\s/g,"\xa0")),d.push(u.substring(t[f]+1,t[f+1]).replace(/\s/g,"\xa0"))):(d.push(u[t[f]]),d.push(u.substring(t[f]+1,t[f+1])))}for(var p=[],m=0;m<d.length;m++){var v=document.createElement("span");null===d[m]?v.textContent=" ":v.textContent=d[m],m%2&&(p.push(v),n&&(v.style.backgroundColor="#aaa")),i.appendChild(v)}for(var b=[],h=parseInt(c.borderTopWidth,10)+parseInt(c.marginTop,10)-e.scrollTop,k=parseInt(c.borderLeftWidth,10)+parseInt(c.marginLeft,10)-e.scrollLeft,j=parseInt(c.lineHeight,10),g=0;g<p.length;g++)b.push({top:p[g].offsetTop+h,left:p[g].offsetLeft+k,height:j});return n?(o.top="0",o.right="0"):document.body.removeChild(i),b}var X=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.debug;if(!e)return[];for(var a=[],i=0;i<t.length;i++)a.push(t[i].start,t[i].end);for(var o=[],c=0;c<a.length;c++)a[c]!==a[c-1]&&o.push(a[c]);for(var s=G(e,o,{debug:n}),u=[],d=0,l=0;d<a.length;d++)u.push(s[l]),a[d]!==a[d+1]&&l++;for(var f=[],p=e.clientWidth,m=0;m<u.length;m+=2){var v=u[m],b=v.left,h=v.top,k=v.height,j=u[m+1],g=j.left,O=j.top;if(h!==O){for(var x=[{x:b,y:h,w:p-b,h:k}],y=Math.round((O-h)/k)-1,I=0;I<y;I++)x.push({x:0,y:h+(I+1)*k,w:p,h:k});x.push({x:0,y:h+(y+1)*k,w:g,h:k}),f.push(x)}else f.push([{x:b,y:h,w:g-b,h:k}])}return f},Y=function(e){var t=e.x,r=e.y,n=e.w,a=e.h;return{left:"".concat(t,"px"),top:"".concat(r,"px"),height:"".concat(a,"px"),width:"".concat(n,"px")}},Q=Object(n.forwardRef)((function(e,t){var r=e.labelLine,n=Object(c.a)(e,z);return Object(h.jsx)("div",Object(l.a)(Object(l.a)({ref:t},n),{},{style:Y(r)}))})),$=Object(n.forwardRef)((function(e,t){var r=e.anchorProps,n=e.TipComponent,a=Object(c.a)(e,J);return Object(h.jsx)("div",Object(l.a)(Object(l.a)({ref:t},r),{},{children:Object(h.jsx)(n,Object(l.a)({},a))}))})),_=function(e){var t=e.marker,r=e.markers,a=e.labelLines,i=e.getClassName,o=e.tipClassName,c=e.InnerComponent,u=e.TipComponent,d=e.visibleTipData,l=e.updateTipVisibility,f=e.updateTipFocusFunction,p=e.markersHandlers,m=e.textAreaId,v=e.tipsZIndex,b=Object(n.useState)(-1),k=Object(s.a)(b,2),j=k[0],g=k[1],O=null==d?j:d.labelLineIndex;!0===O&&(O=a.length-1);var x=Object(n.useRef)({}),y=function(e){clearTimeout(x.current.timer),function(e,r){null==d?g(r):l({marker:t,visible:!0,labelLineIndex:r,type:e})}("mouseOver",e)},I=function(e){null==!d?g(-1):l({marker:t,visible:!1,type:e})},C=function(){x.current.timer=setTimeout((function(){I("mouseOver")}),250)};Object(n.useEffect)((function(){return function(){return clearTimeout(x.current.timer)}}),[]);var S=function(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.start,a=r.end,i=null!==(e=r.delta)&&void 0!==e?e:0;n?p.focus(t.start-i):a?p.focus(t.end+i):p.focus()},E=function(){return S({end:!0})},T=t.uuid,L=Object(n.useCallback)((function(e){f({marker:T,focus:null===e||void 0===e?void 0:e.focus})}),[f,T]),w=O>=0,R=a.length-1;return a.map((function(e,n){var s=0===n,d=n===R,l="".concat(t.uuid,"[").concat(n,"].button"),f="".concat(t.uuid,"[").concat(n,"].list"),b=u&&O===n,k=function(r){return Object(h.jsx)(Q,{ref:r,id:l,role:"button","aria-haspopup":"true","aria-controls":f,"aria-expanded":b,labelLine:e,onMouseEnter:function(){return y(n)},onMouseLeave:C,onPointerDown:E,onPointerUp:E,onClick:E,"data-tip-anchor-for-textarea":m,"data-tip-anchor-for-marker":t.uuid,className:i({isFirstLine:s,isLastLine:d,isTipVisible:w}),children:c?Object(h.jsx)(c,{marker:t,markersHandlers:p,labelLine:e,labelLineIndex:n,labelLines:a}):null},n)};return b?Object(h.jsx)(W.a,{attachment:"top left",targetAttachment:"bottom left",style:{zIndex:v},constraints:[{to:"scrollParent",attachment:"together"},{to:"window",attachment:"together"}],renderTarget:k,renderElement:function(e){return Object(h.jsx)($,{ref:e,focusImperativeRef:L,TipComponent:u,menuListId:f,menuButtonId:l,marker:t,markers:r,markersHandlers:p,focusParent:S,onHide:function(e){I(),!1!==e&&S(e)},anchorProps:{className:o,onMouseEnter:function(){return y(n)},onMouseLeave:C,"data-tip-for-textarea":m,"data-tip-for-marker":t.uuid}})}},"visible-tip"):k()}))},ee=function(e){var t=e.marker;return Object(h.jsx)("pre",{children:JSON.stringify(t,null,3)})},te=function(e){var t=e.markers,r=e.inEditMarker,n=e.labels,a=e.getClassName,i=e.getTipClassName,o=e.InnerComponent,c=e.TipComponent,s=void 0===c?ee:c,u=e.visibleTipsData,d=e.updateTipVisibility,f=e.updateTipFocusFunction,p=e.markersHandlers,m=e.textAreaId,v=e.tipsZIndex;return t.map((function(e,c){var b=n[c];return b?Object(h.jsx)(_,{marker:e,markers:t,labelLines:b,getClassName:function(t){return a(Object(l.a)(Object(l.a)({},t),{},{isInEdit:e.uuid===(null===r||void 0===r?void 0:r.uuid),marker:e}))},tipClassName:i({marker:e,isInEdit:e.uuid===(null===r||void 0===r?void 0:r.uuid)}),InnerComponent:o,TipComponent:s,visibleTipData:u?null!=u[e.uuid]&&u[e.uuid]:null,updateTipVisibility:d,updateTipFocusFunction:f,markersHandlers:p,textAreaId:m,tipsZIndex:v},e.uuid):null}))},re=function(e){var t=e.labelLines,r=e.getClassName,n=t.length-1;return t.map((function(e,t){var a=0===t,i=t===n;return Object(h.jsx)(Q,{labelLine:e,className:r({isFirstLine:a,isLastLine:i})},t)}))},ne=function(e){var t=e.markers,r=e.labels,n=e.inEditMarker,a=e.visibleTipsData,i=e.getClassName;return t.map((function(e,t){var o=r[t];return o?Object(h.jsx)(re,{labelLines:o,getClassName:function(t){return i(Object(l.a)(Object(l.a)({},t),{},{isInEdit:e.uuid===(null===n||void 0===n?void 0:n.uuid),isTipVisible:Boolean(a[e.uuid]),marker:e}))}},e.uuid):null}))},ae={back:function(e){var t=e.isFirstLine,r=e.isLastLine,n=e.isInEdit,a=e.isTipVisible,i=e.marker;return"textarea-back-label textarea-back-".concat(i.type,"-label").concat(t?" textarea-back-label-first-line":"").concat(r?" textarea-back-label-last-line":"").concat(n?" textarea-back-label-inedit":"").concat(a?" textarea-back-label-tip-shown":"")},front:function(e){var t=e.isFirstLine,r=e.isLastLine,n=e.isInEdit,a=e.isTipVisible,i=e.marker;return"textarea-front-label textarea-front-".concat(i.type,"-label").concat(t?" textarea-front-label-first-line":"").concat(r?" textarea-front-label-last-line":"").concat(n?" textarea-front-label-inedit":"").concat(a?" textarea-front-label-tip-shown":"")},tip:function(e){var t=e.marker;return"textarea-tip-container textarea-tip-".concat(t.type,"-container")}},ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.defaultBackgroundColor,r=void 0===t?"white":t,a=e.tipsZIndex,i=void 0===a?99999999:a,o=e.classNameGetters,u={front:(null===o||void 0===o?void 0:o.front)?function(e){var t;return null!==(t=o.front(e,ae.front(e)))&&void 0!==t?t:ae.front(e)}:ae.front,back:(null===o||void 0===o?void 0:o.back)?function(e){var t;return null!==(t=o.back(e,ae.back(e)))&&void 0!==t?t:ae.back(e)}:ae.back,tip:(null===o||void 0===o?void 0:o.tip)?function(e){var t;return null!==(t=o.tip(e,ae.tip(e)))&&void 0!==t?t:ae.tip(e)}:ae.tip};return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"textarea";return Object(n.forwardRef)((function(t,a){var o,d=t.backgroundColor,f=void 0===d?r:d,p=t.InnerComponent,m=t.TipComponent,b=t.visibleTipsData,k=t.updateTipVisibility,j=t.updateTipFocusFunction,g=t.onResize,O=t.onScroll,x=t.onMarkersChange,y=t.onInEditMarkerChange,I=t.imperativeRef,C=t.id,S=Object(c.a)(t,Z),E=Object(n.useRef)({markers:[]}),T=Object(n.useRef)(),L=Object(n.useRef)(),w=Object(n.useState)([]),R=Object(s.a)(w,2),M=R[0],D=R[1],H=Object(n.useState)(E.current.markers),P=Object(s.a)(H,2),K=P[0],N=P[1],A=Object(n.useState)(null),V=Object(s.a)(A,2),F=V[0],B=V[1];return Object(n.useEffect)((function(){var e=L.current;E.current.markers=K,D(X(e,K))}),[K]),Object(h.jsxs)("div",{id:C,className:"textarea-container",style:{backgroundColor:f,width:null===(o=S.style)||void 0===o?void 0:o.width},children:[Object(h.jsx)("div",{className:"textarea-back",children:Object(h.jsx)(ne,{markers:E.current.markers,inEditMarker:F,labels:M,visibleTipsData:b,getClassName:u.back})}),Object(h.jsx)(e,Object(l.a)(Object(l.a)({ref:v(a,L)},S),{},{id:C,imperativeRef:v(T,I),onScroll:function(e){var t=L.current;D(X(t,K)),O&&O(e)},onResize:function(e){var t=L.current;D(X(t,K)),g&&g(e)},onMarkersChange:function(e){var t=e.markers;N(t),x&&x(e)},onInEditMarkerChange:function(e){var t=e.markers[e.inEditMarkerIndex];B(t),y&&y(e)}})),Object(h.jsx)("div",{className:"textarea-front",children:Object(h.jsx)(te,{markers:E.current.markers,inEditMarker:F,labels:M,getClassName:u.front,getTipClassName:u.tip,InnerComponent:p,TipComponent:m,visibleTipsData:b,updateTipVisibility:k,updateTipFocusFunction:j,markersHandlers:T.current,textAreaId:C,tipsZIndex:i})})]})}))}},oe=["onResize"],ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"textarea";return Object(n.forwardRef)((function(t,r){var a,i=t.onResize,o=Object(c.a)(t,oe),s=Object(n.useRef)({});s.current.onResize=i;var u=Object(n.useRef)();return Object(n.useEffect)((function(){var e=u.current.contentWindow;return e.onresize=function(e){s.current.onResize&&s.current.onResize(e)},function(){e.onresize=null}}),[]),Object(h.jsxs)("div",{className:"textarea-with-resize-container",style:{width:null===(a=o.style)||void 0===a?void 0:a.width},children:[Object(h.jsx)("iframe",{ref:u,title:"resize-frame"}),Object(h.jsx)(e,Object(l.a)({ref:r},o))]})}))},se=["onSelectionChange"],ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"textarea";return Object(n.forwardRef)((function(t,r){var a=t.onSelectionChange,i=Object(c.a)(t,se),o=Object(n.useRef)({});o.current.onSelectionChange=a;var s=Object(n.useRef)();return Object(n.useEffect)((function(){var e=s.current,t=function(e){var t=s.current;t===document.activeElement&&o.current.onSelectionChange&&o.current.onSelectionChange({target:t})};document.addEventListener("selectionchange",t);var r=function(e){var t=s.current;"Delete"!==e.key&&"Backspace"!==e.key||o.current.onSelectionChange({target:t})};return e.addEventListener("keyup",r),function(){document.removeEventListener("selectionchange",t),e.removeEventListener("keyup",r)}}),[]),Object(h.jsx)(e,Object(l.a)({ref:v(r,s)},i))}))},de=["onHide"],le=["imperativeRef","onInEditMarkerChange"],fe=!1,pe=!0,me="toggle",ve=function(e){return function(t){var r=t.onHide,a=Object(c.a)(t,de),i=Object(n.useRef)({});return i.current.onHide=r,Object(n.useEffect)((function(){var e=function(e){"Escape"===e.key&&i.current.onHide()};return document.addEventListener("keyup",e),function(){return document.removeEventListener("keyup",e)}}),[]),Object(h.jsx)(e,Object(l.a)({onHide:r},a))}},be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return pe};return function(t){var r=t.markerUuid,n=t.visiblityStack,a=t.requestedHideType,i=e({markerUuid:r,visiblityStack:n,requestedHideType:a});return Array.isArray(i)?i:i===fe?n:1!==i&&a?n.filter((function(e){return e.type!==a})):[]}},he=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.TipComponent,r=e.hideOnEscape,a=void 0===r||r;return a&&(t=ve(t)),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"textarea";return Object(n.forwardRef)((function(r,a){var i=r.imperativeRef,o=r.onInEditMarkerChange,u=Object(c.a)(r,le),d=Object(n.useRef)({}),p=Object(n.useState)({data:{},dataStack:{}}),v=Object(s.a)(p,2),k=v[0].data,j=v[1],g=Object(n.useCallback)((function(e){var t=e.marker,r=e.focus,n=(null===t||void 0===t?void 0:t.uuid)||t;j((function(e){var t=e.data,a=e.dataStack;return t[n]?{data:Object(l.a)(Object(l.a)({},t),{},Object(f.a)({},n,Object(l.a)(Object(l.a)({},t[n]),{},{focus:r}))),dataStack:a}:e}))}),[]),O=Object(n.useCallback)((function(e){var t=e.marker,r=e.type,n=e.visible,a=e.labelLineIndex,i=e.hideAction;i=be(i);var o=(null===t||void 0===t?void 0:t.uuid)||t;j(n||o?function(e){var t,c,s=e.data,u=e.dataStack;if(!(n=n===me?!(null===(t=u[o])||void 0===t?void 0:t.find((function(e){return e.type===r}))):Boolean(n))){var d=u[o];if(!d)return e;var p=i({markerUuid:o,visiblityStack:d,requestedHideType:r});if(p.length){var v=p[p.length-1];return{data:Object(l.a)(Object(l.a)({},s),{},Object(f.a)({},o,{type:v.type,labelLineIndex:v.labelLineIndex,focus:s[o].focus})),dataStack:Object(l.a)(Object(l.a)({},u),{},Object(f.a)({},o,p))}}var b=Object(l.a)({},s);delete b[o];var h=Object(l.a)({},u);return delete h[o],{data:b,dataStack:h}}return r=r||"default-inner",{data:Object(l.a)(Object(l.a)({},s),{},Object(f.a)({},o,{type:r,labelLineIndex:null===a||void 0===a||a,focus:null===(c=s[o])||void 0===c?void 0:c.focus})),dataStack:Object(l.a)(Object(l.a)({},u),{},Object(f.a)({},o,[].concat(Object(m.a)((u[o]||[]).filter((function(e){return e.type!==r}))),[{type:r,labelLineIndex:null===a||void 0===a||a}])))}}:function(e){var t=e.data,n=e.dataStack,a=Object(l.a)({},t),o=Object(l.a)({},n);for(var c in o){var s=i({markerUuid:c,visiblityStack:n[c],requestedHideType:r});if(s.length){o[c]=s;var u=a[c].focus,d=o[c][o[c].length-1];a[c]={type:d.type,labelLineIndex:d.labelLineIndex,focus:u}}else delete o[c],delete a[c]}return{data:a,dataStack:o}})}),[]),x=b(i,(function(){return{updateTipVisibility:O}}),[O]),y=Object(s.a)(x,1)[0];return Object(h.jsx)(e,Object(l.a)(Object(l.a)({ref:a},u),{},{imperativeRef:y,TipComponent:t,visibleTipsData:k,updateTipVisibility:O,updateTipFocusFunction:g,onInEditMarkerChange:function(e){var t=e.markers[e.inEditMarkerIndex],r=d.current.inEditMarker;d.current.inEditMarker=t,r&&r.uuid!==(null===t||void 0===t?void 0:t.uuid)&&O({marker:r,visible:!1,type:"inEdit"}),t&&t!==r&&O({marker:t,visible:!0,type:"inEdit"}),o&&o(e)}}))}))}},ke=["visibleTipsData","updateTipVisibility","onInEditMarkerChange"],je=function(e){return Object(n.forwardRef)((function(t,r){var a=t.visibleTipsData,i=t.updateTipVisibility,o=t.onInEditMarkerChange,s=Object(c.a)(t,ke),u=Object(n.useRef)(),d=Object(n.useRef)({});d.current.visibleTipsData=a,d.current.updateTipVisibility=i,Object(n.useEffect)((function(){var e=u.current,t=function(e){var t=d.current.inEditMarker;if("ArrowDown"!==e.key&&"ArrowUp"!==e.key||!t)d.current.updateTipVisibility({visible:!1,type:"keyboard"});else{d.current.updateTipVisibility({marker:t,visible:!0,type:"keyboard"});var r=t.uuid;setTimeout((function(){var t=d.current.visibleTipsData[r];(null===t||void 0===t?void 0:t.focus)&&t.focus({delta:"ArrowDown"===e.key?1:-1})})),e.preventDefault(),e.stopPropagation()}};return e.addEventListener("keydown",t),function(){return e.removeEventListener("keydow",t)}}),[]);return Object(h.jsx)(e,Object(l.a)({ref:v(r,u),onInEditMarkerChange:function(e){var t=e.markers[e.inEditMarkerIndex],r=d.current.inEditMarker;r&&r.uuid!==(null===t||void 0===t?void 0:t.uuid)&&d.current.updateTipVisibility({visible:!1,type:"keyboard"}),d.current.inEditMarker=t,o&&o(e)},visibleTipsData:a,updateTipVisibility:i},s))}))},ge=["id","updateTipVisibility"],Oe=function(e){return Object(n.forwardRef)((function(t,r){var a=t.id,i=t.updateTipVisibility,o=Object(c.a)(t,ge),s=Object(n.useRef)(),u=Object(n.useRef)({});return u.current.updateTipVisibility=i,Object(n.useEffect)((function(){var e=u.current,t=function(t){for(var r=t.target,n=!1,i=!1,o=!1;r;){var c,s;if(n=r.id===a,i=(null===(c=r.dataset)||void 0===c?void 0:c.tipForTextarea)===a,o=(null===(s=r.dataset)||void 0===s?void 0:s.tipAnchorForTextarea)===a,n||i||o)break;r=r.parentNode}if(n||i||o){var u=o&&r.dataset.tipAnchorForMarker;e.updateTipVisibility({visible:!1,type:"clickOnTip",hideAction:function(e){var t=e.markerUuid;e.visiblityStack;return t!==u?pe:fe}}),o?e.updateTipVisibility({marker:u,visible:me,type:"clickOnTip",hideAction:function(){return 1}}):i&&e.updateTipVisibility({marker:r.dataset.tipForMarker,visible:!0,type:"clickOnTip"})}else e.updateTipVisibility({visible:!1}),t.preventDefault()};return document.addEventListener("click",t),function(){return document.removeEventListener("click",t)}}),[a]),Object(h.jsx)(e,Object(l.a)({id:a,ref:v(r,s),updateTipVisibility:i},o))}))},xe=function(e){return Object(n.forwardRef)((function(t,r){var a=Object(n.useRef)();return Object(n.useEffect)((function(){var e=a.current,t=function(e){return e.preventDefault(),!1},r=function(e){return 90!==e.keyCode&&89!==e.keyCode||!e.ctrlKey||(e.preventDefault(),!1)};return e.addEventListener("dragstart",t),e.addEventListener("dragenter",t),e.addEventListener("dragover",t),e.addEventListener("dragend",t),e.addEventListener("keydown",r),function(){e.removeEventListener("dragstart",t),e.removeEventListener("dragenter",t),e.removeEventListener("dragover",t),e.removeEventListener("dragend",t),e.removeEventListener("keydown",r)}}),[]),Object(h.jsx)(e,Object(l.a)({ref:v(r,a)},t))}))},ye=["markers","imperativeRef","id"],Ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"textarea";return a.a.forwardRef((function(t,r){t.markers;var a=t.imperativeRef,i=t.id,o=Object(c.a)(t,ye),s=Object(n.useRef)();return Object(n.useImperativeHandle)(a,(function(){return{focus:function(e){var t=s.current;t.focus(),e&&("number"===typeof e?(t.selectionStart=e,t.selectionEnd=e):(t.selectionStart=e.selectionStart,t.selectionEnd=e.selectionEnd))}}}),[]),Object(h.jsx)(e,Object(l.a)({ref:v(r,s),id:"".concat(i,"-textarea")},o))}))},Ce=function(e){return function(t){var r=e(t);return{getItem:function(e){try{return r.getItem(e)}catch(t){return void console.error("error getting cache item",t)}},setItem:function(e,t){try{r[e]=t}catch(n){console.error("error setting cache item",n)}}}}},Se=function(){var e={};return{getItem:function(t){return e[t]},setItem:function(t,r){e[t]=r}}},Ee=function(e,t,r){if("function"!==typeof r){var n=r;r=function(e){return e[n]}}for(var a={},i=0;i<e.length;i++){var o=e[i];a[r(o)]=t(o,i,e)}return a},Te=function(e,t){return e.filter((function(e){return function(e,t){var r=(null!==t&&void 0!==t?t:"").toLowerCase();if("string"===typeof e)return e.toLowerCase().includes(r);for(var n in e){var a=e[n];if("string"===typeof a&&a.toLowerCase().includes(r))return!0}return!1}(e,t)}))},Le=function(e){return function(){var t=e.apply(void 0,arguments);return Promise.resolve().then((function(){return t}))}},we=["id"],Re=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"textarea";return Object(n.forwardRef)((function(r,a){var i=r.id,o=Object(c.a)(r,we),s=Object(n.useRef)(i||e()).current;return Object(h.jsx)(t,Object(l.a)({ref:a,id:s},o))}))}},Me=["width","lineHeight"],De=function(e){var t=e.defaultLineHeight,r=void 0===t?"135%":t,a=e.defaultWidth;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"textarea";return Object(n.forwardRef)((function(t,n){var i,o,s,u,d=t.width,f=t.lineHeight,p=Object(c.a)(t,Me);return Object(h.jsx)(e,Object(l.a)(Object(l.a)({ref:n},p),{},{style:Object(l.a)(Object(l.a)({},p.style),{},{width:null!==(i=null!==d&&void 0!==d?d:null===(o=p.style)||void 0===o?void 0:o.width)&&void 0!==i?i:a,lineHeight:null!==(s=null!==f&&void 0!==f?f:null===(u=p.style)||void 0===u?void 0:u.lineHeight)&&void 0!==s?s:r})}))}))}},He=r(12),Pe=r.n(He),Ke=function(e){var t=e.partKey,r=e.loader,a=e.cache,i=e.getLoadData,o=e.getCacheKey,c=void 0===o?function(e){return JSON.stringify(e)}:o,u=e.shouldReloadData,d=void 0===u?function(){return!1}:u,f=e.isAbortError;i=i||function(e){for(var r=e.marker,n=r.partsConfig,a=r.partsIds,i={},o=0;o<n.length;o++){var c=n[o].key;if(i[c]=a[c],c===t)return i}return i};return function(e){var o=e.marker,u=e.markers,p=e.markersHandlers,m=Object(n.useRef)({}),v=Object(n.useState)({}),b=Object(s.a)(v,2),h=b[0],k=h.loading,j=h.error,g=h.retry,O=b[1],x=o.partsData[t],y=void 0===x||d(x)?i({partKey:t,marker:o,markers:u}):null,I=y?c(y):null;m.current.loadData=y,m.current.markersHandlers=p,m.current.cacheKey=I,m.current.marker=o;var C=Object(n.useCallback)((function(){return O((function(e){var t;return Object(l.a)(Object(l.a)({},e),{},{retry:(null!==(t=e.retry)&&void 0!==t?t:0)+1})}))}),[]);return Object(n.useEffect)((function(){var e=m.current,n=e.loadData,i=e.marker;if(n){var o=a.getItem(I);if(o||null===o)return m.current.markersHandlers.updateMarkerPart({partKey:t,marker:i},{data:o}),void O({});var c=new Pe.a;return O({loading:!0}),r(n,c.signal).then((function(e){var r;e=null!==(r=e)&&void 0!==r?r:null,a.setItem(I,e),I===m.current.cacheKey&&(m.current.markersHandlers.updateMarkerPart({partKey:t,marker:i},{data:e}),O({}))})).catch((function(e){f(e)||I===m.current.cacheKey&&O({error:e})})),function(){return c.abort()}}}),[I,g]),{loading:k,error:j,loadData:y,data:x,retry:C}}},Ne=function(e){var t=e.markerType,r=e.partKey,n=e.Component,a=e.NotFoundComponent,i=e.loader,o=e.shouldReloadData,c=e.getLoadData,s=e.getCacheKey,u=e.LoaderComponent,d=e.ErrorComponent,l=e.getCache,f=e.isAbortError,p=l({type:"details",markerType:t,partKey:r});a=a||n;var m=Ke({partKey:r,loader:i,cache:p,getLoadData:c,getCacheKey:s,shouldReloadData:o,isAbortError:f});return function(e){var t=e.marker,i=e.markers,o=e.focusParent,c=e.onHide,s=e.markersHandlers,l=e.focusImperativeRef,f=e.menuListId,p=e.menuButtonId,v=m({marker:t,markers:i,markersHandlers:s}),b=v.loading,k=v.error,j=v.data,g=v.loadData,O=v.retry;return k?Object(h.jsx)(d,{error:k,retry:O,partKey:r,loadData:g,marker:t,markers:i,focusParent:o,onHide:c,focusImperativeRef:l,menuListId:f,menuButtonId:p,markersHandlers:s}):null===j?Object(h.jsx)(a,{data:null,partKey:r,loadData:g,marker:t,markers:i,focusParent:o,onHide:c,focusImperativeRef:l,menuListId:f,menuButtonId:p,markersHandlers:s}):b||!j?Object(h.jsx)(u,{partKey:r,loadData:g,marker:t,markers:i,focusParent:o,onHide:c,focusImperativeRef:l,menuListId:f,menuButtonId:p,markersHandlers:s}):Object(h.jsx)(n,{data:j,partKey:r,loadData:g,marker:t,markers:i,focusParent:o,onHide:c,focusImperativeRef:l,menuListId:f,menuButtonId:p,markersHandlers:s})}},Ae=function(e,t){var r=Object(n.useState)(e),a=Object(s.a)(r,2),i=a[0],o=a[1];return Object(n.useEffect)((function(){var r=setTimeout((function(){o(e)}),t);return function(){return clearTimeout(r)}}),[e,t]),i},Ve=function(e){var t=e.partKey,r=e.loader,a=e.cache,i=e.getSearchData,o=void 0===i?function(e){return{searchText:e.searchText,partsIds:e.marker.partsIds}}:i,c=e.getCacheKey,u=void 0===c?function(e){return JSON.stringify(e)}:c,d=e.filterResults,f=e.debounceDuration,p=e.isAbortError;return function(e){var i,c=e.marker,m=e.markers,v=Object(n.useRef)({}),b=c.partsText[t],h=null!==(i=o({searchText:b,partKey:t,marker:c,markers:m}))&&void 0!==i?i:null,k=null!=h?u(h):null,j=Ae(k,f),g=null===k,O=Object(n.useState)({}),x=Object(s.a)(O,2),y=x[0],I=y.loading,C=y.error,S=y.results,E=y.resultsCacheKey,T=y.retry,L=x[1],w=E===k;v.current.marker=c,v.current.markers=m,v.current.searchData=h;var R=Object(n.useCallback)((function(){return L((function(e){var t;return Object(l.a)(Object(l.a)({},e),{},{retry:(null!==(t=e.retry)&&void 0!==t?t:0)+1})}))}),[]);return Object(n.useEffect)((function(){if(v.current.cacheKey=j,null!==j){var e=v.current.searchData,t=a.getItem(j);if(!t){var n=new Pe.a;return L({loading:!0}),r(e,n.signal).then((function(t){a.setItem(j,t),v.current.cacheKey===j&&L({results:d(t,e),resultsCacheKey:j})})).catch((function(e){p(e)||v.current.cacheKey===j&&L({error:e})})),function(){return n.abort()}}L({results:d(t,e),resultsCacheKey:j})}else L({})}),[j,T]),{noSearch:g,loading:I,error:w?C:null,searchText:b,searchData:h,results:w?S:null,retry:R}}},Fe=function(e){var t=e.partKey,r=e.autoSelect;return function(e){var a=e.searchText,i=e.searchData,o=e.results,c=e.marker,s=e.markers,u=e.focusParent,d=e.onHide,f=e.markersHandlers,p=Object(n.useRef)({});p.current.searchData=i,p.current.marker=c,p.current.markers=s,p.current.focusParent=u,p.current.onHide=d,p.current.markersHandlers=f;var m=c.parts[c.parts.length-1].key===t;Object(n.useEffect)((function(){var e,n;if(o){var i=p.current,c=i.searchData,s=i.marker,u=i.markers,d=i.focusParent,f=i.onHide,v=i.markersHandlers,b=r({marker:s,markers:u,searchText:a,searchData:c,results:o,isLastPart:m});if(b){if(!b.id)throw new Error('autoSelect function in part "'.concat(t,'"\'s search options did not return an "id" field which is required'));var h=v.updateMarkerPart({marker:s,partKey:t},Object(l.a)(Object(l.a)({},b),{},{cursor:null!==(e=b.cursor)&&void 0!==e?e:"end",isLocked:null===(n=b.isLocked)||void 0===n||n}));d(),(b.hide||void 0===b.hide&&(null===h||void 0===h?void 0:h.isLocked))&&setTimeout((function(){return f(!1)}))}}}),[o,a,m])}},Be=function(e){var t=e.markerType,r=e.partKey,a=e.detailsComponents,i=e.loader,o=e.filterResults,c=e.getSearchData,s=e.getCacheKey,u=e.getCache,d=e.ZeroSearchResultsComponent,l=e.NoSearchComponent,f=e.ResultsComponent,p=e.LoaderComponent,m=e.ErrorComponent,v=e.debounceDuration,b=e.autoSelect,k=e.isAbortError,j=u({type:"search",markerType:t,partKey:r}),g=Ve({partKey:r,loader:i,cache:j,getSearchData:c,getCacheKey:s,filterResults:o,debounceDuration:v,isAbortError:k}),O=Fe({partKey:r,autoSelect:b});return function(e){var t=e.marker,i=e.markers,o=e.focusParent,c=e.onHide,s=e.markersHandlers,u=e.focusImperativeRef,v=e.menuListId,b=e.menuButtonId,k=g({marker:t,markers:i}),j=k.noSearch,x=k.loading,y=k.error,I=k.searchText,C=k.searchData,S=k.results,E=k.retry;return Object(n.useEffect)((function(){j&&!l&&c()}),[j,c]),O({searchText:I,searchData:C,results:S,marker:t,markers:i,focusParent:o,onHide:c,markersHandlers:s}),j&&l?Object(h.jsx)(l,{detailsComponents:a,partKey:r,searchText:I,searchData:C,marker:t,markers:i,focusParent:o,onHide:c,focusImperativeRef:u,menuListId:v,menuButtonId:b,markersHandlers:s}):y?Object(h.jsx)(m,{error:y,retry:E,detailsComponents:a,partKey:r,searchText:I,searchData:C,marker:t,markers:i,focusParent:o,onHide:c,focusImperativeRef:u,menuListId:v,menuButtonId:b,markersHandlers:s}):x||!S?Object(h.jsx)(p,{detailsComponents:a,partKey:r,searchText:I,searchData:C,marker:t,markers:i,focusParent:o,onHide:c,focusImperativeRef:u,menuListId:v,menuButtonId:b,markersHandlers:s}):S.length?Object(h.jsx)(f,{results:S,detailsComponents:a,partKey:r,searchText:I,searchData:C,marker:t,markers:i,focusParent:o,onHide:c,focusImperativeRef:u,menuListId:v,menuButtonId:b,markersHandlers:s}):Object(h.jsx)(d,{results:S,detailsComponents:a,partKey:r,searchText:I,searchData:C,marker:t,markers:i,focusParent:o,onHide:c,focusImperativeRef:u,menuListId:v,menuButtonId:b,markersHandlers:s})}},Ue=function(e,t){return e<0?t-1-(-e-1)%t:e%t},We=["ResultListComponent"],ze=function(e){var t=e.partKey,r=e.ItemComponent,a=e.ContainerComponent,i=void 0===a?function(e){var t=e.ResultListComponent,r=Object(c.a)(e,We);return Object(h.jsx)(t,Object(l.a)({},r))}:a,o=e.onSelect,u=function(e){var a=e.results,i=e.marker,c=e.markers,u=e.markersHandlers,d=e.onHide,f=e.focusParent,p=e.focusImperativeRef,m=e.menuListId,v=e.menuButtonId,b=Object(n.useState)(null),k=Object(s.a)(b,2),j=k[0],g=k[1];Object(n.useImperativeHandle)(p,(function(){return{focus:function(e){var t=e.start,r=e.end,n=e.delta,a=e.index;g(t?0:r?-1:null!=n?function(e){return null==e?n>0?n-1:n:e+n}:a)}}}),[]);var O=function(e){var r,n,a=o({partKey:t,selectedItem:e,marker:i,markers:c});if(!a.id)throw new Error('onSelect function in part "'.concat(t,'"\'s search options did not return an "id" field which is required'));var s=u.updateMarkerPart({marker:i,partKey:t},Object(l.a)(Object(l.a)({data:e},a),{},{cursor:null!==(r=a.cursor)&&void 0!==r?r:"end",isLocked:null===(n=a.isLocked)||void 0===n||n}));f(),(a.hide||void 0===a.hide&&(null===s||void 0===s?void 0:s.isLocked))&&setTimeout((function(){return d(!1)}))},x=null==j?null:Ue(j,a.length),y=Object(n.useRef)();Object(n.useEffect)((function(){if(null!=x&&y.current){y.current.focus();var e=setTimeout((function(){document.activeElement!==y.current&&"-1"===document.activeElement.getAttribute("tabIndex")&&(document.activeElement.removeAttribute("tabIndex"),y.current.focus())}));return function(){return clearTimeout(e)}}}),[x]);return Object(h.jsx)("ul",{role:"menu",id:m,"aria-labelledby":v,className:"search-results-list",onKeyDown:function(e){if("ArrowDown"===e.key){var t=x+1;t<a.length?g(t):(g(null),f()),e.preventDefault(),e.stopPropagation()}else if("ArrowUp"===e.key){var r=x-1;r>=0?g(r):(g(null),f()),e.preventDefault(),e.stopPropagation()}else"ArrowLeft"===e.key?(g(null),d({start:!0}),e.preventDefault(),e.stopPropagation()):"ArrowRight"===e.key?(g(null),f(),e.preventDefault(),e.stopPropagation()):"Enter"===e.key&&a[x]&&(O(a[x]),e.preventDefault(),e.stopPropagation())},children:a.map((function(e,n){return Object(h.jsx)("li",{role:"none",children:Object(h.jsx)("a",{ref:function(e){x===n&&(y.current=e)},role:"menuitem",tabIndex:"-1",className:"search-results-list-item".concat(x===n?" search-results-list-item--focused":""),onClick:function(){return O(e)},children:Object(h.jsx)(r,{partKey:t,item:e,marker:i,markers:c})})},n)}))})};return function(e){return Object(h.jsx)(i,Object(l.a)({ResultListComponent:u},e))}},Je=function(e){var t=e.tipOptions,r=t.markerType,n=t.anchorChar,a=t.parts,i=e.isAbortError,o=Ee(a,(function(e){var t=e.key,a=e.details;if(!a)return null;var o=a.Component,c=a.NotFoundComponent,s=a.loader,u=a.getCacheKey,d=a.shouldReloadData,l=a.getLoadData,f=a.LoaderComponent,p=a.ErrorComponent,m=a.getCache;return Ne({markerType:r,anchorChar:n,partKey:t,Component:o,NotFoundComponent:c,loader:s,getCacheKey:u,shouldReloadData:d,getLoadData:l,LoaderComponent:f,ErrorComponent:p,getCache:m,isAbortError:i})}),"key"),c=Ee(a,(function(e){var t=e.key,a=e.search,c=a.ResultsComponent,s=a.ResultItemComponent,u=a.onItemSelect,d=a.ZeroSearchResultsComponent,f=void 0===d?function(){return"No matching entries found"}:d,p=a.NoSearchComponent,m=a.loader,v=a.filterResults,b=a.getSearchData,h=a.autoSelect,k=a.getCacheKey,j=void 0===k?function(e){return JSON.stringify(e)}:k,g=a.LoaderComponent,O=a.ErrorComponent,x=a.debounceDuration,y=a.getCache;if(h&&!u)throw new Error("autoSelect needs onItemSelect to be defined");var I=h?function(e){var t=e.partKey,r=e.marker,n=e.markers,a=h(e);if(a){var i=u({partKey:t,selectedItem:a,marker:r,markers:n});return i?Object(l.a)({data:a},i):i}}:function(){};return Be({markerType:r,anchorChar:n,partKey:t,detailsComponents:o,loader:m,filterResults:v,getSearchData:b,getCacheKey:j,NoSearchComponent:p,ZeroSearchResultsComponent:f,ResultsComponent:s?ze({partKey:t,ItemComponent:s,ContainerComponent:c,onSelect:u}):c,LoaderComponent:g,ErrorComponent:O,debounceDuration:x,getCache:y,autoSelect:I,isAbortError:i})}),"key");return function(e){var t=e.marker,r=e.markers,n=e.focusParent,a=e.onHide,i=e.markersHandlers,s=e.focusImperativeRef,u=e.menuListId,d=e.menuButtonId;if(t.isLocked){var l=t.partsConfig[t.partsConfig.length-1],f=o[l.key];return Object(h.jsx)(f,{marker:t,markers:r,focusParent:n,onHide:a,markersHandlers:i,focusImperativeRef:s,menuListId:u,menuButtonId:d})}var p=t.lastResolvedPartIndex+1,m=t.partsConfig[p],v=c[m.key];return Object(h.jsx)(v,{marker:t,markers:r,focusParent:n,onHide:a,markersHandlers:i,focusImperativeRef:s,menuListId:u,menuButtonId:d})}},Ze=function(e){var t=e.tipsOptionsByType,r=e.isAbortError,a={};for(var i in t)a[i]=Je({tipOptions:t[i],isAbortError:r});return function(e){var t=e.marker,r=e.markers,i=e.focusParent,o=e.onHide,c=e.markersHandlers,s=e.focusImperativeRef,u=e.menuListId,d=e.menuButtonId,l=Object(n.useRef)({});l.current.onHide=o;var f=a[t.type];return Object(n.useEffect)((function(){f||l.current.onHide()}),[f]),f?Object(h.jsx)(f,{marker:t,markers:r,focusParent:i,onHide:o,markersHandlers:c,focusImperativeRef:s,menuListId:u,menuButtonId:d}):null}},qe=["searchConfig","detailsConfig","searchOptions","detailsOptions","LoaderComponent","ErrorComponent","debounceDuration","getCache"],Ge=function(e){var t=e.anchors,r=e.version,n=void 0===r?0:r,a=e.LoaderComponent,i=e.ErrorComponent,o=e.hideTipOnEscape,s=void 0===o||o,u=e.debounceDuration,d=void 0===u?300:u,f=e.getId,p=void 0===f?function(){return"".concat(Math.round(999999*Math.random()),"-").concat(Date.now())}:f,m=e.classNameGetters,v=e.getCache,b=e.backgroundColor,h=e.lineHeight,k=e.width,j=e.TextArea,g=e.tipsZIndex,O=e.isAbortError,x=void 0===O?function(e){return e.aborted||e.message.toLowerCase().includes("abort")}:O;v=v?Ce(v):Se;var y=Ee(t,(function(e){var t=e.getCache?Ce(e.getCache):v,r=e.LoaderComponent||a||function(){return"Loading..."},n=e.ErrorComponent||i||function(e){var t=e.error;return(null===t||void 0===t?void 0:t.message)||"Oops"},o=e.debounceDuration||d;return{markerType:e.type,parts:e.parts.map((function(a,i){var c,s,u=a.key,d=a.searchConfig,f=a.detailsConfig,p=a.searchOptions,m=a.detailsOptions,v=a.LoaderComponent,b=a.ErrorComponent,h=a.debounceDuration,k=a.getCache;if(f=f||m,!(c=(d=d||p).data?(d.filterData||function(e,t){return Te(e,t.searchText)}).bind(null,d.data):d.loader||d.search||d.searchFunction))throw new Error("".concat(e.type,"'s ").concat(u,' part does not have a search "loader" function nor (a "data" field with optional "filterData" function)'));if(f){if(d.data){if(!f.findInSearchData)throw new Error("".concat(e.type,"'s ").concat(u,' part which has a "data" search field does not provide a "findInSearchData" function. It is needed to locate an specific item by id in the search "data"'));s=f.findInSearchData.bind(null,d.data)}else s=f.loader||f.loadDetails||f.loadDetail;if(!s)throw new Error("".concat(e.type,"'s ").concat(u,' part does not have a details "loader" function nor a (details "findInSearchData" function and a search "data" field)'))}else if(i===e.parts[i].length-1)throw new Error("detailsConfig is issing for last part (".concat(u,") of marker ").concat(e.type,". Last part of a marker must have a detailsConfig defined"));return{key:u,search:Object(l.a)(Object(l.a)({LoaderComponent:v||r,ErrorComponent:b||n,debounceDuration:h||o},d),{},{filterResults:d.filterResults||function(e){return e},getCache:d.getCache||k?Ce(d.getCache||k):t,loader:Le(c)}),details:f?Object(l.a)(Object(l.a)({LoaderComponent:v||r,ErrorComponent:b||n},f),{},{Component:f.Component||f.DisplayComponent||f.DetailsComponent||f.DetailComponent,getCache:f.getCache||k?Ce(f.getCache||k):t,loader:Le(s)}):null}}))}}),"type"),I=t.map((function(e){return{anchorChar:e.anchorChar,type:e.type,parts:e.parts.map((function(e){e.searchConfig,e.detailsConfig,e.searchOptions,e.detailsOptions,e.LoaderComponent,e.ErrorComponent,e.debounceDuration,e.getCache;return Object(c.a)(e,qe)}))}}));return Re(p)(De({defaultLineHeight:h,defaultWidth:k})(he({hideOnEscape:s,TipComponent:Ze({tipsOptionsByType:y,isAbortError:x})})(Oe(je(ie({classNameGetters:m,tipsZIndex:g,defaultBackgroundColor:b})(ce(B({markerParserOptions:{version:n,anchors:I}})(C(ue(xe(Ie(j))))))))))))},Xe=(r(29),["ResultListComponent"]),Ye=function(e){var t=e.data;return Object(h.jsx)("div",{className:"person-details-container",children:Object(h.jsx)("img",{src:t.imageUrl,alt:"person"})})},Qe=function(e){var t=e.item;return Object(h.jsxs)("div",{className:"person-item",children:[Object(h.jsx)("img",{src:t.imageUrl,alt:"person"}),"\xa0",t.name]})},$e=[{id:"mo",name:"Mohammad Amin",imageUrl:"./img/img (2).jpg"},{id:"lara",name:"Lara Croft",imageUrl:"./img/img (1).png"},{id:"john",name:"John Doe",imageUrl:"./img/img (1).jpg"},{id:"jane",name:"Jane Doe",imageUrl:"./img/img (2).png"},{id:"bilz",name:"Bilal Harb",imageUrl:"./img/img (3).jpg"},{id:"paul",name:"Paul Pogba",imageUrl:"./img/img (3).png"},{id:"nitin",name:"Nitin Picktach",imageUrl:"./img/img (4).png"}],_e=function(e,t){return new Promise((function(r,n){var a=setTimeout((function(){r($e.filter((function(t){var r;return null===(r=t.name)||void 0===r?void 0:r.trim().toLocaleLowerCase().includes(null===e||void 0===e?void 0:e.trim().toLowerCase())})))}),1e3+2e3*Math.random());t.addEventListener("abort",(function(){var e=new Error("aborted");clearTimeout(a),n(e)}))}))},et=function(e,t){return new Promise((function(r,n){var a=setTimeout((function(){r($e.find((function(t){return t.id===e})))}),500+1e3*Math.random());t.addEventListener("abort",(function(){var e=new Error("aborted");clearTimeout(a),n(e)}))}))},tt=function(e){var t=e.data;return Object(h.jsxs)("div",{children:[Object(h.jsx)("h5",{children:t.name}),Object(h.jsx)("p",{children:t.details})]})},rt=function(e){var t=e.item;return Object(h.jsx)("div",{className:"thing-item",children:t.name})},nt=[{id:"spoon",name:"Spoon",details:"To eat soup"},{id:"fork",name:"Fork",details:"To eat fries"},{id:"spork",name:"Spork",details:"Multi purpose"},{id:"knife",name:"Knife",details:"To cut food"},{id:"plate",name:"Plate",details:"Food container"},{id:"pencil",name:"Pencil",imageUrl:"/img/img (3).jpg",details:"To write down notes"},{id:"Pen",name:"Pen",details:"To write in exams"}],at=function(e,t){return new Promise((function(r,n){var a=setTimeout((function(){r(nt.filter((function(t){var r;return null===(r=t.name)||void 0===r?void 0:r.trim().toLocaleLowerCase().includes(null===e||void 0===e?void 0:e.trim().toLowerCase())})))}),1e3+2e3*Math.random());t.addEventListener("abort",(function(){var e=new Error("aborted");clearTimeout(a),n(e)}))}))},it=function(e,t){return new Promise((function(r,n){var a=setTimeout((function(){r(nt.find((function(t){return t.id===e})))}),500+1e3*Math.random());t.addEventListener("abort",(function(){var e=new Error("aborted");clearTimeout(a),n(e)}))}))},ot=function(e){var t=e.marker,r=e.markersHandlers;return Object(h.jsxs)("b",{children:["Person not found!",Object(h.jsx)("br",{}),Object(h.jsx)("br",{}),Object(h.jsx)("button",{type:"button",onClick:function(){return r.deleteMarker(t)},children:"Delete"})," ",Object(h.jsx)("button",{type:"button",onClick:function(){return r.unmarkMarker(t)},children:"Unmark"})]})},ct=function(e){return e.substr(0,1).toUpperCase()+e.substr(1).toLowerCase()},st=Ge({version:0,classNameGetters:{back:function(e,t){var r=e.marker;if("combined"===r.type&&r.partsIds.type)return"".concat(t," textarea-back-").concat(r.partsIds.type,"-label")}},anchors:[{anchorChar:"!",type:"combined",parts:[{key:"type",endChar:":",searchOptions:{ResultItemComponent:function(e){var t=e.item;return Object(h.jsx)("div",{children:ct(t)})},data:["person","thing"],onItemSelect:function(e){var t=e.selectedItem;return{text:ct(t),id:t}},autoSelect:function(e){var t=e.searchText;switch(null===t||void 0===t?void 0:t.trim().toLowerCase()){case"person":return"person";case"thing":return"thing";default:return}}}},{key:"item",endChar:":",searchOptions:{ResultItemComponent:function(e){switch(e.marker.partsIds.type){case"person":return Object(h.jsx)(Qe,Object(l.a)({},e));case"thing":return Object(h.jsx)(rt,Object(l.a)({},e));default:return"Oops! Unknown type!"}},loader:function(e,t){var r=e.searchText;switch(e.partsIds.type){case"person":return _e(r,t);case"thing":return at(r,t);default:throw new Error("Oops! Unknown type!")}},onItemSelect:function(e){var t=e.selectedItem;switch(e.marker.partsIds.type){case"person":case"thing":return{text:t.name,id:t.id};default:return!1}},getCacheKey:function(e){var t=e.searchText,r=e.partsIds.type;return"".concat(r,":").concat((null===t||void 0===t?void 0:t.trim().toLowerCase())||"")}},detailsOptions:{Component:function(e){switch(e.marker.partsIds.type){case"person":return Object(h.jsx)(Ye,Object(l.a)({},e));case"thing":return Object(h.jsx)(tt,Object(l.a)({},e));default:return"Oops! Unknown type!"}},NotFoundComponent:function(e){var t=e.onHide,r=e.marker.partsIds.type;switch(Object(n.useEffect)((function(){"thing"===r&&t()}),[r,t]),r){case"person":return Object(h.jsx)(ot,Object(l.a)({},e));case"thing":return null;default:return"Oops! Unknown type!"}},loader:function(e,t){var r=e.type,n=e.item;switch(r){case"person":return et(n,t);case"thing":return it(n,t);default:throw new Error("Oops! Unknown type!")}},getCacheKey:function(e){var t=e.type,r=e.item;return"".concat(t,":").concat(r)}}}]},{anchorChar:"@",type:"person",parts:[{key:"person",endChar:":",searchOptions:{ResultItemComponent:Qe,NoResultItemComponent:function(){return"No matching people found"},onItemSelect:function(e){var t=e.selectedItem;return{text:t.name,id:t.id}},loader:function(e,t){var r=e.searchText;return _e(r,t)},getCacheKey:function(e){var t=e.searchText;return(null===t||void 0===t?void 0:t.trim().toLowerCase())||null},debounceDuration:350},detailsOptions:{Component:Ye,NotFoundComponent:ot,loader:function(e,t){var r=e.person;return et(r,t)},getCacheKey:function(e){return e.person}}}]},{anchorChar:"#",type:"thing",parts:[{key:"thing",endChar:":",searchOptions:{ResultsComponent:function(e){var t=e.ResultListComponent,r=Object(c.a)(e,Xe);return Object(h.jsxs)("p",{children:[Object(h.jsx)("h5",{children:"Found the following things:"}),Object(h.jsx)(t,Object(l.a)({},r))]})},NoSearchComponent:function(){return Object(h.jsxs)("pre",{children:["Write something to start the search.",Object(h.jsx)("br",{}),"This custom no search message is only configured for things"]})},ResultItemComponent:rt,onItemSelect:function(e){var t=e.selectedItem;return{text:t.name,id:t.id}},loader:function(e,t){var r=e.searchText;return at(r,t)},getCacheKey:function(e){var t=e.searchText;return(null===t||void 0===t?void 0:t.trim().toLowerCase())||null},debounceDuration:350},detailsOptions:{Component:tt,loader:function(e,t){var r=e.thing;return it(r,t)},getCacheKey:function(e){return e.thing}}}]}],ErrorComponent:function(e){return e.error.message},LoaderComponent:function(){return Object(h.jsx)("h5",{children:Object(h.jsx)("b",{children:"Loading..."})})},hideTipOnEscape:!0}),ut=["partsConfig"],dt=$e.map((function(e){return e.name})).join(", "),lt=nt.map((function(e){return e.name})).join(", "),ft=function(){var e=Object(n.useState)([]),t=Object(s.a)(e,2),r=t[0],a=t[1],i=Object(n.useState)([]),o=Object(s.a)(i,2),u=o[0],l=o[1],f=Object(n.useRef)();return Object(h.jsxs)("div",{className:d.a.container,children:[Object(h.jsxs)("ul",{children:[Object(h.jsxs)("li",{children:["use ",Object(h.jsx)("b",{children:"!"})," to trigger mixed marker start. Here you first need to select a type (person/thing), then select the item you want.",Object(h.jsxs)("ul",{children:[Object(h.jsxs)("li",{children:["Available people:",Object(h.jsx)("br",{}),dt]}),Object(h.jsxs)("li",{children:["Available things:",Object(h.jsx)("br",{}),lt]}),Object(h.jsx)("li",{children:'Mixed marker has autoSelect enabled on its first part (the type part). to test it out try writing "!person" and it should automatically select the person type.'}),Object(h.jsx)("li",{children:"if selected type is thing the color of the marker will be orange, else it will default to gray"}),Object(h.jsx)("li",{children:"All mixed markers will have a custom gray border (actually its an outline)"})]})]}),Object(h.jsxs)("li",{children:["use ",Object(h.jsx)("b",{children:"@"})," to trigger person marker start. Available people to search same as above.",Object(h.jsx)("br",{}),"people marker color is the default gray color"]}),Object(h.jsxs)("li",{children:["use ",Object(h.jsx)("b",{children:"#"})," to trigger things marker start. Available things to search same as above.",Object(h.jsx)("br",{}),"things marker color is a custom orange color"]})]}),Object(h.jsx)(st,{className:"smart-text-area",imperativeRef:f,initValue:"Mohammad Amin is the author of this component\nJohn Doe is a generic male name\nJane Doe is a generic female name\nasdfg is a name not in our database\n\nFork, Knife and Spoon are kitchen utensils we eat with",initMarkers:[{start:0,end:13,type:"combined",partsIds:{type:"person",item:"mo"}},{start:46,end:54,type:"person",partsIds:{person:"john"}},{start:78,end:86,type:"person",partsIds:{person:"jane"}},{start:112,end:117,type:"person",partsIds:{person:"asdfg"}},{start:149,end:153,type:"thing",partsIds:{thing:"fork"}},{start:155,end:160,type:"combined",partsIds:{type:"thing",item:"knife"}},{start:165,end:170,type:"thing",partsIds:{thing:"spoon"}}],onMarkersChange:function(e){a(e.markers)},onInEditMarkerChange:function(e){l(e.markers[e.inEditMarkerIndex])}}),Object(h.jsx)("h5",{children:"Markers:"}),Object(h.jsx)("pre",{children:r.map((function(e){e.partsConfig;var t=Object(c.a)(e,ut);return Object(h.jsx)("div",{className:t.uuid===(null===u||void 0===u?void 0:u.uuid)?d.a.inEditMarker:"",children:JSON.stringify(t,null,3)},t.uuid)}))})]})};o.a.render(Object(h.jsx)(ft,{}),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.036b253a.chunk.js.map